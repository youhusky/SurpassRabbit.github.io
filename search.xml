<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[redux"ä½¿ç”¨"æ•™ç¨‹]]></title>
    <url>%2F2018%2F08%2F07%2Fredux%E2%80%9D%E4%BD%BF%E7%94%A8%E2%80%9C%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[å¦‚æžœåœ¨å­¦ä¹ react-nativeçš„è¿‡ç¨‹ä¸­é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿ŽåŠ å…¥QQç¾¤397885169ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·æˆé•¿ã€‚ è¯†å…”ï¼Œä¸€æ¬¾ç”¨æ¥è¯†åˆ«å›¾ç‰‡çš„å¼€æºé¡¹ç›®ï¼Œåœ¨æœªæ¥è¿˜ä¼šæ·»åŠ æ›´å¤šæœ‰æ„æ€çš„ä¸œè¥¿ è¯†å…”çŽ°å·²é‡æž„ï¼Œå®Œå…¨æŒ‰ç…§ä¸Šçº¿é¡¹ç›®ä½œä¸ºå¼€å‘æ ‡å‡†ï¼Œä½¿ç”¨Mobxç®¡ç†çŠ¶æ€ï¼Œé€‚é…iPhoneXå’Œå®‰å“å„ç§å¼‚å½¢å±ï¼Œè¿˜æœ‰æ›´å¤šæœ‰æ„æ€çš„ä¸œè¥¿ç­‰å¾…æ‚¨çš„å‘çŽ° æ‚¨çš„starå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„å¸®åŠ© æœ¬æ–‡çš„Demoæœ€ç»ˆçš„è¿è¡Œæ•ˆæžœ å‰è¨€æœ¬æ–‡ä»…å†™ç»™åœ¨é¡¹ç›®ä¸­æ²¡ç”¨ä½¿ç”¨è¿‡reduxï¼Œåˆæ€¥äºŽåˆ©ç”¨reduxå¼€å‘çš„åŒå­¦ä»¬ã€‚ ä¹‹å‰å¼€æºrnç‰ˆç™¾æ€ä¸å¾—å§çš„æ—¶å€™ï¼Œå†™è¿‡å‡ ç¯‡æ–‡ç« ï¼Œæœ‰äººé—®ä»€ä¹ˆæ—¶å€™ä¼šå‡ºrn+reduxçš„æ–‡ç« ï¼Œæˆ‘ä¹ŸçŠ¹è±«äº†å¾ˆä¹…ï¼Œå› ä¸ºåœ¨å¼€æºç™¾æ€çš„æ—¶å€™ï¼Œæ²¡æœ‰ç”¨åˆ°è·¨é¡µé¢ä¼ é€’çŠ¶æ€ã€‚ ä¸Šä¸ªæœˆæˆ‘å¼€æºäº†è¯†å…”(å¯ä»¥è¯†åˆ«æ‰‹æœºä¸­æˆ–è€…æ‹æ‘„çš„å›¾ç‰‡)ï¼Œæœ¬æ¥æ‰“ç®—ä½¿ç”¨mobxæ¥åšçŠ¶æ€ç®¡ç†çš„ï¼Œä½†åœ¨çœŸæ­£ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½æ˜¯æˆ‘çš„æ–¹æ³•ä¸å¯¹ï¼Œæˆ‘æ€»æ„Ÿè§‰mobxæ€»æœ‰é‚£ä¹ˆä¸€ç‚¹æ¬ ç¼ºï¼Œæ·±æ€ç†Ÿè™‘ä¹‹åŽï¼Œè¿˜æ˜¯å†³å®šä½¿ç”¨reduxæ¥ç®¡ç†é¡¹ç›®ä¸­çš„çŠ¶æ€ã€‚ åœ¨ä¹‹å‰å­¦ä¹ reduxçš„è¿‡ç¨‹ä¸­å‘çŽ°ï¼Œç½‘ä¸Šå’ŒGithubä¸Šç¡®å®žæœ‰å¾ˆå¤šå¼€æºreduxçš„ä¾‹å­ï¼Œå’Œä»‹ç»reduxçš„æ–‡ç« ï¼Œä½†å¾ˆå°‘æœ‰ä»Žæ–°æ‰‹è§’åº¦è€ƒè™‘çš„æ–‡ç« ï¼Œç»å¤§éƒ¨åˆ†æ–°æ‰‹ä¸ä¸€å®šéœ€è¦çŸ¥é“reduxæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œä»–ä»¬åªæ˜¯æƒ³å°½å¿«çš„åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å®ƒï¼Œè€Œæˆ‘ä¹Ÿè®¤ä¸ºä¸ç”¨ä½ å’‹çŸ¥é“åŽŸç†æ˜¯å•¥ï¼Œæ‰€ä»¥æˆ‘å†™äº†è¿™ç¯‡æ–‡ç« ï¼Œç”¨è¯†å…”é¡¹ç›®ä¸­çš„å‡ ä¸ªå°æ¡ˆä¾‹æ¥è®©æ–°åŒå­¦å…¥äº†reduxçš„é—¨ã€‚ ps:å“ªæ€•çœŸçš„ä¸æ„¿æ„çŸ¥é“reduxçš„åŽŸç†ï¼Œä¹Ÿéœ€è¦çŸ¥é“reduxä¸­åŸºæœ¬æ¦‚å¿µå’Œ APIï¼Œæ¯”å¦‚è¯´åœ¨é¡¹ç›®ä¸­ä¼šç»å¸¸ç”¨åˆ°çš„Storeã€Actionã€Reducerç­‰ç­‰ã€‚è€Œä¸ºäº†çŸ¥é“æ€Žä¹ˆç”¨ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯åŽ»çœ‹å…¶ä»–å¼€æºçš„é¡¹ç›®ï¼Œä½†çœ‹çš„è¶Šå¤šåªä¼šè®©ä½ çš„æ€è·¯è¶Šå‡Œä¹±ï¼Œæ‰€ä»¥åœ¨æ–‡ç« ä¸­ç”¨æˆ‘çš„å†™æ³•ï¼Œæ¯ä¸ªäººç†è§£çš„reduxéƒ½ä¸ä¸€æ ·ï¼Œä½†ä¸‡å˜ä¸ç¦»å…¶å®—ï¼Œå­¦ä¼šä¸€ç§ä¹‹åŽå¯ä»¥å†æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ›´æ”¹ã€‚ éœ€æ±‚1.ç½‘ç»œè¯·æ±‚ï¼šreduxæœ€ç®€å•çš„éœ€æ±‚å½“ç„¶å°±æ˜¯ç½‘ç»œè¯·æ±‚äº†ï¼Œè¯†å…”é¦–é¡µï¼Œè¿›å…¥Appçš„æ—¶å€™æ˜¯éœ€è¦è¯·æ±‚ä¸€æ¬¡ç½‘ç»œçš„ï¼Œç”¨æ¥éªŒè¯UserTokenï¼Œå¦‚æžœä¸å­˜åœ¨å°±ä»Žç½‘ç»œèŽ·å–å¹¶ä¿å­˜ï¼Œå¦‚æžœå­˜åœ¨å°±ç›´æŽ¥å–å‡ºæ¥ã€‚2.è·¨é¡µé¢ä¿®æ”¹çŠ¶æ€ï¼šè¯†å…”çš„é¦–é¡µèƒŒæ™¯å›¾æ˜¯ä¸ªå¤§ç¾Žå¥³ï¼Œæˆ‘è¦åœ¨ç¦åˆ©(ç€‘å¸ƒæµ)é¡µé¢çš„å›¾ç‰‡è¯¦æƒ…ä¸­ï¼Œå¯ä»¥ä¿®æ”¹é¦–é¡µçš„èƒŒæ™¯å›¾ï¼Œä¹‹å‰çš„å†™æ³•æ˜¯é€šè¿‡é€šçŸ¥çš„æ–¹å¼ï¼Œä½†reduxæœ¬èº«å°±æ˜¯å¯ä»¥è·¨é¡µé¢ä¼ å€¼çš„ã€‚ å®žçŽ°é€†å‘å·¥ç¨‹ ä¸ºä»€ä¹ˆè¦æåˆ°é€†å‘å·¥ç¨‹å‘¢ï¼Ÿå› ä¸ºæœ¬æ–‡çš„å†™æ³•å¯èƒ½ä¼šä¸Žæ­£å¸¸çš„æ•°æ®reduxé€»è¾‘ä¸å¤ªä¸€æ ·ï¼Œå®ƒä¼šåç€å†™ï¼Œä¼šè®©ä½ å¾ˆå¿«çœ‹åˆ°æ•ˆæžœï¼Œè€Œä¸æ˜¯è¦å…¨éƒ¨æŠŠActionã€Reducerå…¨éƒ½å†™å®Œäº†ï¼Œæ‰èƒ½çœ‹åˆ°å®Œæ•´çš„æ•ˆæžœã€‚ ç”¨åˆ°çš„reduxåº“1234redux,react-redux,redux-logger,redux-thunk 1. åŒ…è£…å…¥å£æ–‡ä»¶#####å…¥å£æ–‡ä»¶ï¼šå› ä¸ºåœ¨rnä¸­ï¼ŒiOSå’Œå®‰å“å¹³å°å…¥å£æ˜¯ä¸¤ä¸ªæ–‡ä»¶index.ios.jså’Œindex.android.jsï¼Œä¸ºäº†è·¨å¹³å°ï¼Œä¸€èˆ¬éƒ½ä¼šåˆ›å»ºç»Ÿä¸€çš„å…¥å£æ–‡ä»¶ã€‚è¯†å…”é¡¹ç›®çš„å…¥å£æ–‡ä»¶æ˜¯appç›®å½•ä¸‹çš„index.jsæ–‡ä»¶ã€‚ index.js 12345678910111213141516171819202122232425import &#123; AppRegistry,View,Text &#125; from &apos;react-native&apos;;import React, &#123; Component &#125; from &apos;react&apos;;// å¼•å…¥react-reduximport &#123;Provider&#125;from &apos;react-redux&apos;;// å¼•å…¥storeæ–‡ä»¶ï¼Œä¸‹æ­¥ä¼šåˆ›å»ºimport configureStore from &apos;./store/ConfigureStore&apos;;// è°ƒç”¨ store æ–‡ä»¶ä¸­çš„rootReducerå¸¸é‡ä¸­ä¿å­˜çš„æ–¹æ³•const store = configureStore();// é¡¹ç›®ä¸­ä½¿ç”¨äº†react-navigationï¼ŒæŽ¨èçš„åšæ³•æ˜¯å°†åˆå§‹æ–‡ä»¶å†™åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œ// æ‰€ä»¥App.jsä¹Ÿå¯ä»¥çœ‹åšæ˜¯é¡µé¢çš„åˆå§‹åŒ–å…¥å£import App from &apos;./APP&apos;;export default class Root extends Component &#123; render() &#123; return ( // åŒ…è£…App &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt; ); &#125;&#125; 2. åˆ›å»ºConfigureStoreæ–‡ä»¶storeï¼šåœ¨ä¸Šä¸€æ­¥çš„æ—¶å€™ï¼Œä¼šå‘çŽ°æœ‰ä¸€ä¸ªConfigureStore,è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬ä¿—ç§°çš„storeã€‚ConfigureStore.js 123456789101112131415161718192021222324// reduxåº“é‡Œé¢æä¾›çš„æ–¹æ³•ï¼Œåˆ›å»ºstoreå’Œmiddlewareä¸­é—´ä»¶import &#123;createStore,applyMiddleware&#125; from &apos;redux&apos;;// redux-thunkæ˜¯ç”¨æ¥å‘é€å¼‚æ­¥è¯·æ±‚çš„ä¸­é—´ä»¶ï¼Œç”¨äº†thunkä¹‹åŽï¼Œ// ä¸€èˆ¬çš„æ“ä½œæ˜¯å°†ç½‘ç»œè¯·æ±‚çš„æ–¹æ³•æ”¾åœ¨actionä¸­ï¼ŒåŽé¢ä¼šæœ‰è¯´æ˜Žimport thunk from &apos;redux-thunk&apos;;// redux-loggeræ‰“å°loggerçš„ä¸­é—´ä»¶ï¼Œå…·ä½“æ•ˆæžœå¯ä»¥çœ‹ä¸‹å›¾import logger from &apos;redux-logger&apos;;// rootReducerä¸‹ä¸€æ­¥ä¼šåˆ›å»ºimport RootReducer from &apos;../reducers/RootReducer&apos;;let middlewares = [];middlewares.push(logger);middlewares.push(thunk);// é€šè¿‡applyMiddlewareå°†ä¸­é—´ä»¶æ·»åŠ const createStoreWithMiddleware = applyMiddleware(...middlewares)(createStore);// å¯¼å‡ºconfigureStoreï¼Œé‡Œé¢æºå¸¦ç€reducerï¼Œä¸­é—´ä»¶ï¼Œåˆå§‹å€¼export default function configureStore(initialState)&#123; return createStoreWithMiddleware(RootReducer,initialState);&#125; 3. åˆ›å»ºRootReduceræ–‡ä»¶reducerï¼šRootReducerä¸­æ”¾çš„æ˜¯å„ä¸ªé¡µé¢çš„Reducerï¼ŒæŽ¨èçš„åšæ³•æ˜¯ä¸€ä¸ªé¡µé¢å…¬ç”¨ä¸€ä¸ªReducerï¼Œä¾¿äºŽä¹‹åŽç®¡ç†ã€‚RootReducer.js 1234567891011// Reduceræ˜¯çº¯å‡½æ•°ï¼Œé‡Œé¢ä¸åº”è¯¥æœ‰è¿‡å¤šçš„é€»è¾‘ã€‚import &#123; combineReducers &#125; from &apos;redux&apos;;// è¿™ä¸ªæ˜¯ShiTué¡µé¢ä¸­ç”¨åˆ°çš„Reducerimport ShiTuReducer from &apos;./ShiTuReducer&apos;;// ä¸‹é¢è¿™ä¸ªè¿˜æœªå®žçŽ°// import GankReducer from &apos;./GankReducer&apos;;// å–å†³äºŽè¿™é‡Œä½ åŠ å…¥äº†å¤šå°‘ reducerconst RootReducer = combineReducers(&#123; ShiTuReducer,&#125;);export default RootReducer; ShiTuReducer.js 12345678910111213141516171819202122232425262728293031323334353637383940414243// ActionTypesé‡Œé¢å­˜æ”¾ç€Appä¸­å¯èƒ½å‘ç”Ÿçš„æƒ…å†µimport * as types from &apos;../constant/ActionTypes&apos;;// åˆå§‹åŒ–å€¼const initialState = &#123; imageURL: &apos;timg&apos;, userToken: &apos;&apos;, webViewUrl: &apos;&apos;, qiNiuData: null,&#125;;// å¯¼å‡ºShiTuReducerã€‚export default function ShiTuReducer(state = initialState, action)&#123; // console.log(action); // é€šè¿‡switchæ¥åˆ¤æ–­typesçš„å€¼ï¼Œåœ¨actionä¸­å®žçŽ°åŠŸèƒ½ switch (action.type) &#123; // å½“type=USER_TOKEN_SUCCESSæ—¶ï¼Œä¼šå°†actionä¸­çš„å€¼ï¼Œ // èµ‹ç»™userTokenï¼Œåœ¨ShiTu.jsä¸­å°±èƒ½æ‹¿åˆ°userTokençš„å€¼ã€‚ case types.USER_TOKEN_SUCCESS: // console.log(action); return Object.assign(&#123;&#125;, state, &#123; ...state, userToken: action.userToken, &#125;); case types.QINIU_UPLOAD_TOKEN: // console.log(action); return Object.assign(&#123;&#125;, state, &#123; qiNiuData:action.qiNiuData, &#125;); case types.WEBVIEW_URL: return Object.assign(&#123;&#125;, state ,&#123; ...state, webViewUrl:action.webViewUrl, &#125;); case types.BACKIMAGE_URL: return Object.assign(&#123;&#125;, state ,&#123; imageURL:action.imageURL, &#125;); default: return state; &#125;&#125; 4. åˆ›å»ºActionTypesæ–‡ä»¶actionTypesï¼šåœ¨ä½¿ç”¨reduxè¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç»™æ¯ä¸ªåŠ¨ä½œæ·»åŠ ä¸€ä¸ªactionTypesç±»åž‹ï¼Œæ¯”å¦‚è¯´åœ¨ä¸Šé¢ï¼Œæˆ‘è¦èŽ·å–userTokenï¼Œå°±éœ€è¦å†actionTypesä¸­åŠ ä¸ŠUSER_TOKENï¼Œè€Œæœ‰äº›æ—¶å€™ï¼Œè°ƒç”¨ç½‘ç»œä¼šæœ‰æˆåŠŸ/å¤±è´¥ä¸¤ç§çŠ¶æ€ï¼Œæ‰€ä»¥å¯ä»¥å°†è¿™ä¸ªçŠ¶æ€æ›´åŠ ç»†åˆ†USER_TOKEN_SUCCESS/USER_TOKEN_ERROã€‚ActionTypes.js 123456// ç”¨æˆ·Tokenexport const USER_TOKEN_SUCCESS = &apos;USER_TOKEN_SUCCESS&apos;;// èŽ·å–å¤±è´¥export const USER_TOKEN_ERROR = &apos;USER_TOKEN_ERROR&apos;;// é¦–é¡µèƒŒæ™¯å›¾ç‰‡export const BACKIMAGE_URL = &apos;BACKIMAGE_URL&apos;; 5. åˆ›å»ºxxxActionæ–‡ä»¶xxxActionï¼šå¯èƒ½åœ¨ä¸€ä¸ªé¡µé¢éœ€è¦ç”¨åˆ°å¤šä¸ªactionï¼Œæ¯”å¦‚è¯´æˆ‘è¯†å…”é¡µé¢ä¸­ï¼Œè¿›å…¥appçš„æ—¶å€™éœ€è¦è°ƒç”¨èŽ·å–userTokençš„actionï¼Œç‚¹å‡»æŸ¥æ‰¾æŒ‰é’®çš„æ—¶å€™éœ€è¦è°ƒç”¨èŽ·å–å›¾ç‰‡ä¿¡æ¯çš„actionã€‚æ¯ä¸ªé¡µé¢æ˜¯å¯ä»¥æœ‰å¤šä¸ªactionçš„ï¼Œåªéœ€è¦åœ¨é¡µé¢ä¸­å¼•å…¥å°±å¥½ShiTuUserToken.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556// èŽ·å–actionTypeä¸­çš„å…¨éƒ¨çŠ¶æ€ï¼Œéœ€è¦å“ªä¸ªå°±ç”¨å“ªä¸ªimport * as types from &apos;../constant/ActionTypes&apos;;// ç½‘ç»œè¯·æ±‚çš„ç½‘å€å’Œç½‘ç»œè¯·æ±‚çš„æ–¹æ³•import Config from &apos;../common/Config&apos;;import Request from &apos;../common/Request&apos;;import &#123; AsyncStorage &#125; from &apos;react-native&apos;;// å­˜å‚¨ä¿¡æ¯çš„KEYlet KEY = &apos;USERTOKEN&apos;;// è¿™ä¸ªæ–¹æ³•æ˜¯è¯·æ±‚ç½‘ç»œï¼ŒèŽ·å–Tokençš„æ–¹æ³•// è¯†å…”ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¹‹åŽï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦å­˜åœ¨userTokenï¼Œä¸å­˜åœ¨è¯·æ±‚ç½‘ç»œå¹¶ä¿å­˜ï¼Œå­˜åœ¨ç›´æŽ¥è°ƒç”¨è¿”å›žexport function userToken() &#123; return dispatch =&gt; &#123; return Request.get(Config.api.getUserToken,(data)=&gt;&#123; AsyncStorage.getItem(KEY,(Error,result)=&gt;&#123; if (result === null)&#123; Request.get(Config.api.getUserToken,(data)=&gt;&#123; // console.log(data); if (data &amp;&amp; data.success)&#123; let token = data.token; AsyncStorage.setItem(KEY,token,(error)=&gt;&#123; if (error)&#123; console.log(&apos;å­˜å‚¨å¤±è´¥&apos; + error); &#125;else &#123; console.log(&apos;å­˜å‚¨æˆåŠŸ&apos;); // dispatchå‘é€æ•°æ®åˆ°Reduceré‡Œé¢ dispatch(getUserToken(token)); &#125; &#125;) &#125; &#125;,(error)=&gt;&#123; console.log(error); &#125;) &#125;else &#123; console.log(&apos;èŽ·å–æˆåŠŸ&apos; + result); dispatch(getUserToken(result)); &#125; &#125;); &#125;,(error)=&gt;&#123; console.log(error); dispatch(&#123;type: types.USER_TOKEN_ERROR, error: error&#125;); &#125;); &#125;&#125;;// å¦‚æžœ()æ‹¬å·é‡Œé¢çš„å‚æ•°`userToken`å’ŒReduceré‡Œé¢çš„åˆå§‹å‚æ•°ä¸€æ ·ï¼Œå°±å¯ä»¥ä¸ç”¨é”®ï¼šå€¼çš„å†™æ³•ï¼Œç›´æŽ¥è¿”å›žå°±å¥½ã€‚export function getUserToken(userToken) &#123; return &#123; // typeæ˜¯å¿…è¦å‚æ•°ï¼Œé€šè¿‡typeå€¼åˆ¤æ–­ type: types.USER_TOKEN_SUCCESS, userToken &#125;&#125; 6. connectè¿žæŽ¥é¡µé¢å’ŒReducerï¼Œå®Œæˆéœ€æ±‚1connectï¼šå¦‚æžœå®Œæˆäº†ä¸Šé¢çš„æ­¥éª¤ï¼Œæ­å–œä½ ï¼Œè¿˜å·®æœ€åŽä¸€æ­¥å°±å¯ä»¥çœ‹åˆ°è¿è¡Œçš„æ•ˆæžœäº†ï¼Œé‚£å°±æ˜¯åœ¨éœ€è¦çš„é¡µé¢connectã€‚å› ä¸ºShiTu.jsä¸­ä»£ç è¿‡å¤šï¼Œæ‰€ä»¥åªåœ¨æ–‡ç« ä¸­æ”¾é‡è¦çš„éƒ¨åˆ†ï¼Œå¦‚æžœæƒ³è¦æŸ¥çœ‹å…¨éƒ¨ï¼Œå¯ä»¥è¿è¡Œé¡¹ç›®æˆ–è€…ç›´æŽ¥æŸ¥çœ‹ShiTu.jsShiTu.js 123456789101112131415161718192021222324252627282930313233// å¼•å…¥éœ€è¦ç”¨åˆ°çš„æ–¹æ³•Â·Â·Â·// å¼•å…¥connectå’ŒbindActionCreatorsimport &#123; connect &#125; from &apos;react-redux&apos;;import &#123; bindActionCreators &#125; from &apos;redux&apos;;// å¼•å…¥èŽ·å¾—userTokençš„actionæ–¹æ³•import &#123; userToken &#125; from &apos;../../actions/ShiTuUserToken&apos;;Â·Â·Â·// å¯¼å‡ºShiTué¡µé¢å¹¶è¿žæŽ¥ReducerÂ·Â·Â·// connect è¿žæŽ¥ Recucer ï¼Œæˆ‘ShiTu.jsçš„Reducerå«ShiTuReducerï¼Œ// userTokenç­‰æ–¹æ³•æ˜¯æˆ‘åœ¨actioné‡Œé¢åˆ›å»ºçš„ï¼Œæ‰€ä»¥è°ƒç”¨çš„ä¹Ÿå°±æ˜¯actionæ–¹æ³•export default connect((state) =&gt; &#123; const &#123; ShiTuReducer &#125; = state; return &#123; ShiTuReducer &#125;;&#125;,&#123; userToken &#125;)(ShiTu)Â·Â·Â·// ä½¿ç”¨componentDidMount()&#123; console.log(&apos;componentDidMount&apos;); // ä½¿ç”¨userTokenæ–¹æ³•ã€‚ this.props.userToken(); &#125; render() &#123; console.log(&apos;render&apos;); // æŽ‰ç”¨è¿‡ä¸Šé¢çš„æ–¹æ³•åŽå°±å¯ä»¥é€šè¿‡æ‰“å°`ShiTuReducer`èŽ·å¾—éœ€è¦çš„æ•°æ® console.log(this.props.ShiTuReducer);&#125; å®Œæˆä¸Šé¢çš„6æ­¥ï¼Œå°±å¯ä»¥åœ¨çŽ°æœ‰çš„é¡¹ç›®ä¸­ä½¿ç”¨reduxå¼€å‘äº†ã€‚åœ¨ç¬¬6æ­¥ä¸­æˆ‘ä»¬åªæ˜¯å®Œæˆäº†éœ€æ±‚1ï¼ŒæŽ¥ä¸‹æ¥å°±è¦åˆ©ç”¨reduxå®žçŽ°è·¨é¡µé¢æ›´æ”¹çŠ¶æ€äº†ã€‚1. å¯»æ‰¾éœ€æ±‚å¹¶ä¸æ˜¯æ¯ä¸ªAppéƒ½éœ€è¦ç”¨åˆ°è·¨é¡µé¢æ›´æ”¹çŠ¶æ€çš„ï¼Œä½†åœ¨è¯†å…”ä¸­ï¼Œæˆ‘å¿ƒä¸­çš„æƒ³æ³•æ˜¯ï¼Œè¯†å…”é¡¹ç›®ä¸­å¤šæ•°çš„é¡µé¢å¸ƒå±€éƒ½å¯ä»¥ç”±ç”¨æˆ·è‡ªå®šä¹‰ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº†reduxï¼Œå¦‚æžœä¸éœ€è¦ç”¨åˆ°è·¨é¡µé¢æ›´æ”¹çŠ¶æ€ï¼Œä½¿ç”¨stateç®¡ç†ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚éœ€æ±‚2çš„æ“ä½œæµç¨‹æ˜¯ï¼Œåœ¨ç¦åˆ©çš„å›¾ç‰‡è¯¦æƒ…é¡µWelfarePicture.jsä¸­é•¿æŒ‰å›¾ç‰‡å¼¹å‡ºactionSheetï¼Œç‚¹å‡»è®¾ä¸ºä¸»å±å¹•å°±å¯ä»¥ä¿®æ”¹é¦–é¡µçš„èƒŒæ™¯å›¾ç‰‡äº†ã€‚ 2. å®žçŽ°å®žçŽ°é€»è¾‘å’ŒèŽ·å–userTokenåŸºæœ¬ä¸€æ ·ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ï¼Œç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œéœ€è¦é€šè¿‡dispatchä¼ é€’å›¾ç‰‡çš„urlåœ°å€åˆ°Reducerä¸­ã€‚ WelfarePicture 1234567891011121314151617181920212223242526272829303132333435// å› ä¸ºÂ·Â·Â·import &#123; connect &#125; from &apos;react-redux&apos;;import &#123; bindActionCreators &#125; from &apos;redux&apos;;import &#123; backImage,getBackImage &#125; from &apos;../../actions/ShiTuBackImage&apos;;Â·Â·Â·Â·Â·Â·export default connect((state) =&gt; &#123; const &#123; ShiTuReducer &#125; = state; return &#123; ShiTuReducer &#125;;&#125;,&#123; backImage,getBackImage&#125;)(WelfarePicture)Â·Â·Â·// ä¸‹é¢çš„æ–¹æ³•å°±æ˜¯ç‚¹å‡»actionSheetçš„æ–¹æ³•Â·Â·Â·handlePress(url,i) &#123; let SHITUIMAGEKEY = &apos;SHITUIMAGEKEY&apos;; if(i===2)&#123; AsyncStorage.setItem(SHITUIMAGEKEY,url,(error)=&gt;&#123; if (error)&#123; console.log(&apos;å­˜å‚¨å¤±è´¥&apos; + error); &#125;else &#123; console.log(&apos;å­˜å‚¨æˆåŠŸ&apos;); // é€šè¿‡getBackImageæ–¹æ³•å°†å›¾ç‰‡çš„urlå‘ç»™Reducerï¼ŒReducerä¸­å°±ä¼šç›¸åº”çš„æ›´æ–°é¡µé¢ this.props.getBackImage(url); &#125; &#125;) &#125; &#125;Â·Â·Â· æ€»ç»“åœ¨æ–‡ç« ä¸­çœŸçš„æ²¡æœ‰å¤šè¯´reduxåŽŸç†ï¼Œå¦‚æžœæœ‰æƒ³äº†è§£çš„åŒå­¦å¯ä»¥å‚è€ƒé˜®ä¸€å³°è€å¸ˆçš„å‡ ç¯‡æ–‡ç« ï¼Œè®²çš„æ¸…æ™°é€å½»ã€‚ æœ¬æ–‡åªæ˜¯æˆ‘å¯¹äºŽå®žçŽ°reduxçš„ä¸€ç‚¹çœ‹æ³•ï¼Œå¯èƒ½å¹¶ä¸é€‚ç”¨äºŽä½ çš„é¡¹ç›®ï¼Œå¦‚æžœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿ŽåŠ QQç¾¤397885169è®¨è®ºã€‚å¦‚æžœè®¤ä¸ºæˆ‘çš„æ–‡ç« ä¸é”™ï¼Œæ¬¢è¿Žæ‰“èµï¼Œå…³æ³¨ï¼Œå–œæ¬¢ã€‚å¦‚æžœæ„Ÿè§‰æˆ‘çš„æ–‡ç« æœ‰é—®é¢˜ï¼Œæ¬¢è¿Žåœ¨è¯„è®ºåŒºæå‡ºï¼Œæˆ‘ä¼šä¿®æ”¹ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[react-nativeå®žçŽ°ä¸Šä¼ åŠŸèƒ½]]></title>
    <url>%2F2018%2F08%2F07%2Freact-native%E5%AE%9E%E7%8E%B0%E4%B8%8A%E4%BC%A0%E5%8A%9F%E8%83%BD%2F</url>
    <content type="text"><![CDATA[å¦‚æžœåœ¨å­¦ä¹ react-nativeçš„è¿‡ç¨‹ä¸­é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿ŽåŠ å…¥QQç¾¤397885169ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·æˆé•¿ã€‚ è¯†å…”ï¼Œä¸€æ¬¾ç”¨æ¥è¯†åˆ«å›¾ç‰‡çš„å¼€æºé¡¹ç›®ï¼Œåœ¨æœªæ¥è¿˜ä¼šæ·»åŠ æ›´å¤šæœ‰æ„æ€çš„ä¸œè¥¿ è¯†å…”çŽ°å·²é‡æž„ï¼Œå®Œå…¨æŒ‰ç…§ä¸Šçº¿é¡¹ç›®ä½œä¸ºå¼€å‘æ ‡å‡†ï¼Œä½¿ç”¨Mobxç®¡ç†çŠ¶æ€ï¼Œé€‚é…iPhoneXå’Œå®‰å“å„ç§å¼‚å½¢å±ï¼Œè¿˜æœ‰æ›´å¤šæœ‰æ„æ€çš„ä¸œè¥¿ç­‰å¾…æ‚¨çš„å‘çŽ° æ‚¨çš„starå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„å¸®åŠ© å‰è¨€åœ¨æˆ‘æœ€æ–°å¼€æºçš„è¯†å…”é¡¹ç›®ä¸­ï¼Œæœ€é‡è¦çš„åŠŸèƒ½å°±æ˜¯è¯†åˆ«å›¾ç‰‡äº†ï¼Œè€Œå›¾ç‰‡çš„è¯†åˆ«è¿‡ç¨‹å¦‚ä¸‹ é€‰ä¸­/æ‹æ‘„ =&gt; ä¸Šä¼ å›¾ç‰‡ =&gt; åŽå°è¿”å›žè¯†åˆ«ä¹‹åŽçš„url ç¬¬ä¸€æ­¥ä¸­å¯èƒ½é‡åˆ°çš„å‘ï¼Œåœ¨æˆ‘å¦ä¸€ç¯‡æ–‡ç« æœ‰è¿‡è®²è§£react-native-image-pickeråœ¨iOSä¸Šé—ªé€€çš„è§£å†³åŠžæ³•ï¼Œå¦‚æžœè¿˜æœ‰å…¶ä»–çš„é—®é¢˜ï¼Œæ¬¢è¿Žåœ¨è¯„è®ºåŒºæå‡ºã€‚ç¬¬äºŒæ­¥å°±æ˜¯ä¸Šä¼ å›¾ç‰‡äº†ï¼Œåœ¨æœ¬æ–‡ä¸­ä¼šç»™å‡ºä¸¤ç§ä¸Šä¼ å›¾ç‰‡çš„æ–¹å¼ã€‚åŽŸç”Ÿä¸Šä¼ å›¾ç‰‡å’Œä½¿ç”¨rn-fetch-blobå®žçŽ°ä¸Šä¼ å›¾ç‰‡ã€‚ç¬¬ä¸‰æ­¥ï¼Œéœ€è¦æ¶‰åŠä¸€äº›åŽå°çš„ä¸œè¥¿å’ŒwebåŠ è½½çš„åŠ¨ç”»ï¼Œæˆ‘çš„è§„åˆ’æ˜¯å…ˆå°†webçš„åŠ è½½åŠ¨ç”»å†™å‡ºæ¥ï¼ŒåŽç»­å°†nodejsåŽå°çš„æ­å»ºå’Œä½¿ç”¨ï¼Œå†å†™ç‚¹ä¸œè¥¿ã€‚æ³¨ï¼šæœ¬æ–‡ä¸­æ˜¯å°†å›¾ç‰‡ä¸Šä¼ åˆ°ä¸ƒç‰›äº‘ã€‚ä¸Šä¼ åˆ°å…¶ä»–ç©ºé—´ï¼Œä»£ç ä¹Ÿæ˜¯å¤§åŒå°å¼‚ã€‚æ³¨ï¼šreact-native-fetch-blobçš„åŽŸä½œè€…å¾ˆä¹…ä¸æ›´æ–°äº†ï¼ŒçŽ°åœ¨è¿™ä¸ªåº“çš„åå­—å«åšrn-fetch-blob å‡†å¤‡å·¥ä½œä¸ç®¡æ˜¯åŽŸç”Ÿä¸Šä¼ è¿˜æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹ä¸Šä¼ ï¼Œæœ‰ä¸ªæ­¥éª¤éƒ½æ˜¯ä¸èƒ½çœç•¥çš„ï¼Œé‚£å°±æ˜¯éœ€è¦çŸ¥é“ä¸Šä¼ åˆ°å“ªï¼Œå“ªæ€•åœ¨å†™è¿‡è¦ä¸Šä¼ åˆ°ä¸ƒç‰›ï¼Œä½†ä¸ƒç‰›é‚£ä¹ˆå¤§ï¼Œå…·ä½“åˆ°å“ªä¸ªå­˜å‚¨ç©ºé—´è¿™éƒ½æ˜¯éœ€è¦çŸ¥é“çš„ã€‚ åœ¨ä¸Šä¼ ä¹‹å‰é™¤äº†è¦çŸ¥é“ä¸Šä¼ çš„å­˜å‚¨ç©ºé—´ä¹‹å¤–ï¼Œè¿˜è¦èŽ·å¾—ä¸ƒç‰›è¿”å›žçš„å‚æ•°ï¼Œé€šè¿‡ä¸ƒç‰›è¿”å›žçš„hashæ¥çœŸæ­£çš„å®Œæˆä¸Šä¼ ï¼Œä½†è¿™ä¸ªèŽ·å–hashçš„è¿‡ç¨‹ä¸æŽ¨èåœ¨å‰ç«¯åšå¤„ç†ï¼Œæœ€å¥½æ˜¯æ”¾åœ¨åŽç«¯ï¼ˆä½†å¦‚æžœéžè¦æ”¾åœ¨å‰ç«¯ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œä»£ç éƒ½æ˜¯å·®ä¸å¤šçš„ï¼‰ã€‚ ä¸‹é¢çš„ä»£ç ï¼Œæ˜¯æˆ‘å¼€æºè¯†å…”çš„æœ¬åœ°æœåŠ¡å™¨ä»£ç ï¼Œå¦‚æžœé‡åˆ°ä¸æ˜Žç™½çš„é—®é¢˜ï¼Œå¯ä»¥åœ¨githubä¸ŠæŸ¥çœ‹ï¼Œæˆ–è€…åŠ 397885169ä¸€èµ·è®¨è®º 12345678910111213141516171819// å¼•å…¥ä¸ƒç‰›ï¼Œvar qiniu = require(&apos;qiniu&apos;);// å¼•å…¥uuidï¼Œç”¨å®ƒæž„å»ºå”¯ä¸€çš„keyvar uuid = require(&apos;uuid&apos;);var putPolicy;// å”¯ä¸€çš„keyvar key = uuid.v4();// å¤„ç†æ ¼å¼key += &apos;.jpeg&apos;;// é€šè¿‡ä¸ƒç‰›æä¾›çš„æ–¹æ³•ï¼Œæž„å»ºä¸Šä¼ ç­–ç•¥å‡½æ•°ï¼ŒimagePutPolicyå°±æ˜¯ä¸Šä¼ çš„ç©ºé—´åputPolicy = new qiniu.rs.PutPolicy(config.qiniu.imagePutPolicy + &quot;:&quot; + key); var token = putPolicy.token()// è¿”å›žkeyå’Œtokenreturn &#123; key : key, token:token,&#125;; ä½¿ç”¨åŽŸç”Ÿæ–¹å¼ä¸Šä¼ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960// åˆ›å»ºformè¡¨å•let body = new FormData();// tokenå’Œkeyéƒ½æ˜¯é€šè¿‡ä¸ƒç‰›è¿”å›žçš„å‚æ•°body.append(&apos;token&apos;,token);body.append(&apos;key&apos;,key);body.append(&apos;file&apos;,&#123; // è®¾å®šä¸Šä¼ çš„æ ¼å¼ type : &apos;image/jpeg&apos;, // é€šè¿‡react-native-image-pickerèŽ·å–çš„å›¾ç‰‡åœ°å€ uri : uri, name : key, &#125;);// å¼€å¯XMLHttpRequestæœåŠ¡const xhr = new XMLHttpRequest();/** ä¸Šä¼ åˆ°ä¸ƒç‰›äº‘çš„åœ°å€ */const url = Config.qiniu.upload;// å¼€å¯postä¸Šä¼ xhr.open(&apos;POST&apos;,url);// å¦‚æžœæ­£åœ¨ä¸Šä¼ ,è¿”å›žä¸Šä¼ è¿›åº¦if (xhr.upload)&#123; xhr.upload.onprogress = (event)=&gt;&#123; if (event.lengthComputable)&#123; let perent = event.loaded / event.total.toFixed(2); // æ‰“å°ä¸Šä¼ è¿›åº¦ console.log(perent); &#125; &#125;&#125; // ä¸Šä¼ è¿‡æˆåŠŸçš„è¿”å›žxhr.onload = () =&gt; &#123; // console.log(xhr.status); // çŠ¶æ€ç å¦‚æžœä¸ç­‰äºŽ200å°±ä»£è¡¨é”™è¯¯ if (xhr.status !== 200)&#123; alert(&apos;è¯·æ±‚å¤±è´¥&apos;); console.log(xhr.responseText); return; &#125; if (!xhr.responseText)&#123; alert(&apos;è¯·æ±‚å¤±è´¥&apos;); console.log(xhr.responseText); return; &#125; // æœåŠ¡å™¨æœ€åŽè¿”å›žçš„æ•°æ® let response; try&#123; // å°†è¿”å›žæ•°æ®è¿˜åŽŸ response = JSON.parse(xhr.response); console.log(response); // ...é€šè¿‡è¿”å›žæ•°æ®åšæŽ¥ä¸‹æ¥çš„å¤„ç† &#125; &#125;// å‘é€è¯·æ±‚xhr.send(body); ä½¿ç”¨rn-fetch-blobä¸Šä¼ 12345678910111213141516171819202122232425262728293031323334353637383940414243&#123; const token = data.data.token; const key = data.data.key; // è¿™é‡Œéœ€è¦å°†&apos;///&apos;å¤„ç†æŽ‰,å› ä¸ºä½¿ç”¨wrapçš„æ—¶å€™,ä¼šå†åŒ…è£¹ä¸€å±‚ // æœ¬æ–‡çš„fetch-blobä½¿ç”¨çš„æ˜¯0.10.4ç‰ˆæœ¬ï¼Œæ®è¯´å…¶ä»–ç‰ˆæœ¬ä¸ç”¨æ·»åŠ ä¸‹é¢çš„ä»£ç ã€‚ const PATH = iOS ? response.uri.replace(&apos;file:///&apos;,&apos;&apos;) : response.uri; // åˆ›å»ºä¸Šä¼ çš„è¯·æ±‚å¤´ï¼Œä½¿ç”¨fetch-blobå¿…é¡»è¦éµå¾ªnameï¼Œdataçš„æ ¼å¼ï¼Œè¦ä¸ç„¶å°±ä¸æˆåŠŸã€‚ const body = [&#123; name: &apos;token&apos;, data: token, &#125;, &#123; name: &apos;key&apos;, data: key, &#125;,&#123; name: &apos;file&apos;, filename: key || &apos;file&apos;, data: RNFetchBlob.wrap(PATH) &#125;]; RNFetchBlob .fetch(&apos;POST&apos;, url, &#123; // ä¸Šä¼ å›¾ç‰‡è¦è®¾ç½®Header &apos;Content-Type&apos;: &apos;multipart/form-data&apos;, &#125;,body) .uploadProgress((written, total) =&gt; &#123; // æœ¬åœ°æŸ¥æ‰¾è¿›åº¦ &#125;) .progress((received, total) =&gt; &#123; let perent = received / total; // ä¸Šä¼ è¿›åº¦æ‰“å° console.log(perent); &#125;) .then((response) =&gt; response.json()) .then((response) =&gt; &#123; // ä¸Šä¼ ä¿¡æ¯è¿”å›ž console.log(response); &#125;) .catch((error) =&gt; &#123; // é”™è¯¯ä¿¡æ¯ console.log(error); &#125;);&#125; æ¯”è¾ƒ åŽŸç”Ÿçš„ä¸Šä¼ æ–¹å¼å¯¹äºŽå¼€å‘è¿‡åŽŸç”ŸJavaScriptçš„äººæ¥è¯´ï¼Œå…¶å®žæ›´å¥½ç†è§£ï¼Œä½†å¯¹äºŽæ²¡æœ‰å†™è¿‡åŽŸç”Ÿjsçš„ç«¥éž‹ï¼Œå°±éœ€è¦åŽ»äº†è§£XMLHttpRequestå’Œå®ƒçš„ä¸€äº›apiæ‰èƒ½å®Œæˆä¸Šä¼ çš„æ“ä½œã€‚ rn-fetch-blobå°è£…äº†ä¸Šä¼ çš„åŠŸèƒ½ï¼Œå¯¹äºŽå¼€å‘è€…æ¥è¯´ï¼Œapiæ›´ç®€å•ï¼Œä¹Ÿæ›´ä¾¿äºŽæ“ä½œã€‚å”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯bodyå¿…é¡»æŒ‰ç…§å®˜æ–¹æä¾›çš„æ ¼å¼å¡«å†™ï¼Œæœ‰ä¸€ç‚¹ä¸åŒéƒ½ä¼šæŠ¥é”™ï¼Œä½œè€…ä¹‹å‰å°±å¡åœ¨è¿™ä¸Šé¢å¥½é•¿æ—¶é—´ã€‚ ç»è¿‡æµ‹è¯•ï¼Œ4Mä»¥ä¸‹çš„å›¾ç‰‡å¥½åƒæ˜¯èŽ·å–ä¸åˆ°ä¸Šä¼ è¿›åº¦çš„ï¼Œå¦‚æžœæœ‰æ›´å¥½çš„è§£å†³åŠžæ³•ï¼Œæ¬¢è¿Žæå‡ºã€‚ æ€»ç»“ æœ¬æ–‡æ˜¯ä½œè€…åœ¨ä¸Šä¼ å›¾ç‰‡è¿‡ç¨‹ä¸­ï¼Œå¯¹äºŽä¸¤ç§æ–¹å¼çš„æ€»ç»“ï¼Œå¯èƒ½ä¼šæœ‰å†™çš„ä¸æ¸…æ¥šæˆ–è€…ä¸æ­£ç¡®çš„åœ°æ–¹ï¼Œæ¬¢è¿Žåœ¨è¯„è®ºåŒºè¯„è®ºï¼Œæˆ–è€…åŠ 397885169ä¸€èµ·è®¨è®ºã€‚ä½œè€…ä»¥åŽä¼šä¹¦å†™æ›´å¤šæœ‰å…³react-nativeçš„æ–‡ç« ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[react-nativeç»„ä»¶çš„æ‹†åˆ†æŠ€å·§]]></title>
    <url>%2F2018%2F08%2F07%2Freact-native%E7%BB%84%E4%BB%B6%E7%9A%84%E6%8B%86%E5%88%86%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[å¦‚æžœåœ¨å­¦ä¹ react-nativeçš„è¿‡ç¨‹ä¸­é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿ŽåŠ å…¥QQç¾¤397885169ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·æˆé•¿ã€‚ è¯†å…”ï¼Œä¸€æ¬¾ç”¨æ¥è¯†åˆ«å›¾ç‰‡çš„å¼€æºé¡¹ç›®ï¼Œåœ¨æœªæ¥è¿˜ä¼šæ·»åŠ æ›´å¤šæœ‰æ„æ€çš„ä¸œè¥¿ è¯†å…”çŽ°å·²é‡æž„ï¼Œå®Œå…¨æŒ‰ç…§ä¸Šçº¿é¡¹ç›®ä½œä¸ºå¼€å‘æ ‡å‡†ï¼Œä½¿ç”¨Mobxç®¡ç†çŠ¶æ€ï¼Œé€‚é…iPhoneXå’Œå®‰å“å„ç§å¼‚å½¢å±ï¼Œè¿˜æœ‰æ›´å¤šæœ‰æ„æ€çš„ä¸œè¥¿ç­‰å¾…æ‚¨çš„å‘çŽ° æ‚¨çš„starå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„å¸®åŠ© å‰è¨€Reactç»„ä»¶å…·æœ‰å¾ˆå¼ºçš„çµæ´»æ€§å’ŒåŠŸèƒ½æ€§ã€‚ åœ¨JS.COACHä¸Šæœ‰å¾ˆå¤šç»„ä»¶åº“å¯ä¾›ä½¿ç”¨ï¼Œä½†éšç€æ—¶é—´çš„å¢žé•¿ç»„ä»¶ä¼šå˜å¾—éžå¸¸è‡ƒè‚¿ã€‚ ä¸Žä»»ä½•å…¶ä»–ç±»åž‹çš„ç¼–ç¨‹ä¸€æ ·ï¼Œéµå®ˆå•ä¸€åŽŸåˆ™ä¸ä»…ä½¿æ‚¨çš„ç»„ä»¶æ›´æ˜“äºŽç»´æŠ¤ï¼Œè€Œä¸”è¿˜å¯ä»¥å®žçŽ°æ›´å¤šçš„å¤ç”¨ã€‚ ä½†æ˜¯ï¼Œç¡®å®šå¦‚ä½•åˆ†ç¦»å¤§åž‹Reactç»„ä»¶çš„èŒè´£å¹¶ä¸æ˜¯å¾ˆå®¹æ˜“çš„ã€‚ è¿™é‡Œæœ‰ä¸‰ç§æŠ€å·§è®©ä½ ä»Žç®€å•åˆ°å¤æ‚çš„æ–¹å¼å­¦ä¼šæ‹†åˆ†ç»„ä»¶ã€‚ æ‹†åˆ†render()è¿™æ˜¯ä½¿ç”¨æœ€å¤šçš„ï¼Œä¹Ÿæ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼šå½“ç»„ä»¶å‘ˆçŽ°å¤ªå¤šå…ƒç´ æ—¶ï¼Œå°†è¿™äº›å…ƒç´ æ‹†åˆ†ä¸ºé€»è¾‘å­ç»„ä»¶ã€‚ æ‹†åˆ†render() æ˜¯ä¸€ä¸ªå¸¸è§ä¸”å¿«é€Ÿçš„æ–¹å¼ï¼Œæ˜¯åœ¨åŒä¸€ä¸ªclassä¸­åˆ›å»ºå…¶ä»–â€œå­ç»„ä»¶â€æ–¹å¼ï¼š 123456789101112131415161718class Test extends React.Component &#123; renderItem() &#123; // ... &#125; renderHeader() &#123; // ... &#125; render() &#123; return ( &lt;View&gt; &#123;this.renderItem()&#125; &#123;this.renderHeader()&#125; &lt;/View&gt; ); &#125;&#125; è™½ç„¶ä¸Šé¢çš„æ–¹æ³•ä¹Ÿå¯ä»¥ï¼Œä½†å®ƒä¸æ˜¯çœŸæ­£çš„åˆ†è§£ç»„ä»¶ã€‚é¡µé¢ä¸­çš„state, props, å’Œç±»æ–¹æ³•ä»ç„¶æ˜¯å…±äº«çš„ï¼Œå› ä¸ºè¿˜æ˜¯å¾ˆéš¾ç¡®å®šå“ªä¸ªâ€œå­ç»„ä»¶â€ä½¿ç”¨å“ªäº›æ–¹æ³•ã€‚ æ— çŠ¶æ€ç»„ä»¶è¦çœŸæ­£é™ä½Žå¤æ‚åº¦ï¼Œåº”è¯¥åˆ›å»ºå…¨æ–°çš„ç»„ä»¶ã€‚å¯¹äºŽæ›´ç®€å•çš„å­ç»„ä»¶ï¼ŒåŠŸèƒ½ç»„ä»¶å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æ–¹å¼åˆ›å»ºï¼Œä¹Ÿå°±æ˜¯æ— çŠ¶æ€ç»„ä»¶ï¼Œç”¨æ¥ä¿è¯ä½Žè€¦åˆï¼š 1234567891011121314151617181920const TestItem = (props) =&gt; ( return () &#123; &lt;Text title=&#123;props.title&#125;/&gt; &#125;);const TestHeader = (props) =&gt; ( // ...);class Test extends React.Component &#123; render() &#123; return ( &lt;View&gt; &lt;TestItem title=&#123;this.props.title&#125;/&gt; &lt;TestHeader title=&#123;this.props.title&#125;/&gt; &lt;/View&gt; ); &#125;&#125; é€šè¿‡è¿™ç§æ–¹å¼æ‹†åˆ†ï¼Œæœ‰ä¸€ä¸ªé‡è¦çš„å·®å¼‚ã€‚ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶æ›¿ä»£ç›´æŽ¥çš„å‡½æ•°è°ƒç”¨ï¼Œå¯ä»¥ä¸ºReactç”Ÿæˆè¾ƒå°çš„å•å…ƒã€‚é€šè¿‡ä½¿ç”¨æµ…æ¸²æŸ“æ¥è½»æ¾éš”ç¦»è¿™äº›å•å…ƒè¿›è¡Œç‹¬ç«‹æµ‹è¯•ã€‚è€Œå¯¹äºŽæ€§èƒ½æ¥è¯´ï¼Œè¿™æ ·åšä¼šæ›´å¥½ï¼Œå› ä¸ºè¾ƒå°çš„å•å…ƒå°†æ›´æœ‰æ•ˆçš„æ‰§è¡Œæ¸²æŸ“ã€‚ åˆ›å»ºç‹¬ç«‹çš„Reactç»„ä»¶å¦‚æžœç»„ä»¶ç”±äºŽå¤šç§å±žæ€§æˆ–è€…å˜åŒ–è€Œå˜å¾—å¤æ‚ï¼Œå¯ä»¥è€ƒè™‘å°†ç»„ä»¶æ‹†åˆ†æˆå…·æœ‰ä¸€ä¸ªå¤šä¸ªå…¬å¼€å±žæ€§çš„æ¨¡æ¿ç»„ä»¶ã€‚è¿™æ ·å¯ä»¥è®©çˆ¶ç»„ä»¶æ›´ä¸“æ³¨äºŽæ•°æ®ä¼ é€’ï¼Œå°†é€»è¾‘å±‚æ”¾åœ¨å­ç»„ä»¶ä¸­ï¼Œå•ç‹¬çš„ç»„ä»¶ç»´æŠ¤å„è‡ªçš„ç”Ÿå‘½å‘¨æœŸã€‚ ä¾‹å¦‚ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒæŸäº›å­ç»„ä»¶å¯èƒ½ä¼šæœ‰ä¸åŒçš„æ“ä½œæˆ–è€…åŠ è½½ä¸åŒçš„æ•°æ®ï¼Œåˆ©ç”¨Reactä¸­çš„propsæ¥ä¼ é€’å‚æ•°ï¼Œé€šè¿‡å‚æ•°æ¥æŽ§åˆ¶å­ç»„ä»¶çš„æ ·å¼ã€‚ 12345678910111213141516class TestItem extends React.Component &#123; static propTypes = &#123; title: PropTypes.string, press: PropTypes.func, &#125;; render() &#123; const &#123; title, press &#125; = this.props; return ( &lt;View&gt; &lt;Text&gt;&#123;title&#125;&lt;/Text&gt; &lt;Button onPress=&#123;press&#125; title=&apos;ç‚¹å‡»æˆ‘&apos; /&gt; &lt;/View&gt; ); &#125;&#125; å½“ç„¶ä¹Ÿå¯ä»¥ç»§ç»­æ‹†åˆ†classç»„ä»¶ï¼Œåªè´Ÿè´£å•ç‹¬çš„åŠŸèƒ½ï¼Œç±»ä¼¼ä¸Šé¢çš„æ— çŠ¶æ€ç»„ä»¶åŠŸèƒ½æ€§ç»„ä»¶æŽ¨èç»§æ‰¿React.PureComponentï¼Œè¯¦ç»†ä»‹ç»å¯ä»¥å‚è€ƒðŸ‘‡ 123456class Test extends React.PureComponent &#123; render() &#123; return &lt;TestItem title=&#123;&apos;æˆ‘æ˜¯æ ‡é¢˜&apos;&#125; press=&#123;()=&gt;&#123;alert(&apos;æˆ‘æ˜¯ç‚¹å‡»äº‹ä»¶&apos;)&#125; /&gt;; &#125;&#125; åœ¨JSXä¸­ï¼Œç»„ä»¶çš„å¼€å§‹å’Œç»“æŸæ ‡ç­¾ä¹‹é—´çš„ä»»ä½•ä¸œè¥¿éƒ½å¯ä»¥ä½œä¸ºç‰¹æ®Šçš„å­ç»„ä»¶ä¼ é€’ã€‚å½“æ­£ç¡®ä½¿ç”¨æ—¶ï¼Œéƒ½å¯ä»¥è¡¨çŽ°å‡ºæ¥ã€‚ ä½¿ç”¨PureComponent å½“ç»„ä»¶çš„propsæˆ–è€…stateå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼šReactä¼šå¯¹ç»„ä»¶å½“å‰çš„Propså’ŒStateåˆ†åˆ«ä¸ŽnextPropså’ŒnextStateè¿›è¡Œæ¯”è¾ƒï¼Œå½“å‘çŽ°å˜åŒ–æ—¶ï¼Œå°±ä¼šå¯¹å½“å‰ç»„ä»¶ä»¥åŠå­ç»„ä»¶è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼Œå¦åˆ™å°±ä¸æ¸²æŸ“ã€‚æœ‰æ—¶å€™ä¸ºäº†é¿å…ç»„ä»¶è¿›è¡Œä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Œæˆ‘ä»¬é€šè¿‡å®šä¹‰shouldComponentUpdateæ¥ä¼˜åŒ–æ€§èƒ½ã€‚ ä¸ŽComponentç›¸æ¯”è¾ƒï¼ŒPureComponentä¼šè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬å¤„ç†shouldComponentUpdateã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ æˆ‘ä»¬ä½¿ç”¨PureComponentèƒ½å¤Ÿç®€åŒ–æˆ‘ä»¬çš„ä»£ç ï¼Œå¹¶ä¸”æé«˜æ€§èƒ½ï¼Œä½†æ˜¯PureComponentçš„è‡ªåŠ¨ä¸ºæˆ‘ä»¬æ·»åŠ çš„shouldComponentUpateå‡½æ•°ï¼Œåªæ˜¯å¯¹propså’Œstateè¿›è¡Œæµ…æ¯”è¾ƒ(shadow comparison)ï¼Œå½“propsæˆ–è€…stateæœ¬èº«æ˜¯åµŒå¥—å¯¹è±¡æˆ–æ•°ç»„ç­‰æ—¶ï¼Œæµ…æ¯”è¾ƒå¹¶ä¸èƒ½å¾—åˆ°é¢„æœŸçš„ç»“æžœï¼Œè¿™ä¼šå¯¼è‡´å®žé™…çš„propså’Œstateå‘ç”Ÿäº†å˜åŒ–ï¼Œä½†ç»„ä»¶å´æ²¡æœ‰æ›´æ–°çš„é—®é¢˜ã€‚ 123456789101112131415161718192021222324252627282930class ListOfWords extends React.PureComponent &#123; render() &#123; return &lt;Text&gt;&#123;this.props.words.join(&apos;,&apos;)&#125;&lt;/Text&gt;; &#125; &#125;class WordAdder extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; words: [&apos;marklar&apos;] &#125;; &#125; handleClick = () =&gt; &#123; this.setState(prevState =&gt; (&#123; words: prevState.words.concat([&apos;marklar&apos;]) &#125;)); &#125; render() &#123; return ( &lt;View&gt; &lt;Button onPress=&#123;this.handleClick&#125; /&gt; &lt;ListOfWords words=&#123;this.state.words&#125; /&gt; &lt;/View&gt; ); &#125;&#125; é«˜é˜¶ç»„ä»¶é«˜é˜¶ç»„ä»¶å±•ç¤ºäº†Reactçš„å¼ºå¤§çš„ç»„åˆæ€§è´¨ã€‚é€šå¸¸ç”¨äºŽReactåº“ï¼Œä¾‹å¦‚react-reduxï¼Œstyled-componentså’Œreact-intlã€‚ æ¯•è¿™äº›åº“éƒ½æ˜¯è§£å†³ä»»ä½•Reactåº”ç”¨ç¨‹åºçš„é€šç”¨æ–¹é¢ã€‚ ç»“è¯­Reactçš„è®¾è®¡æ¨¡å¼æ˜¯é«˜åº¦å¯ç»„åˆç»„ä»¶åŒ–ã€‚ é€šè¿‡åˆ†è§£å’Œç»„åˆå®ƒä»¬ï¼Œå¯ä»¥è§£å†³å¾ˆå¤šé—®é¢˜ã€‚ä¸è¦å› ä¸ºéº»çƒ¦åŽ»è®¨åŽŒåˆ›å»ºå­ç»„ä»¶ï¼Œèµ·åˆå¯èƒ½ä¼šæ„Ÿè§‰éº»çƒ¦ï¼Œä½†æœ€ç»ˆä¼šå‘çŽ°ç¨‹åºçš„æ€§èƒ½å’Œç»„ä»¶çš„å¯å¤ç”¨æ€§éƒ½ä¼šå¾ˆå¤§çš„æå‡ã€‚ åœ¨å¼€å‘ä¸­ï¼Œå¦‚æžœç»„ä»¶å†…éƒ¨æ‹¥æœ‰stateï¼Œæˆ–è€…éœ€è¦ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„ç»„ä»¶ï¼Œæ›´æŽ¨èä½¿ç”¨PureComponentï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´å¥½çš„æ€§èƒ½ï¼ŒåŒæ—¶å¼ºåˆ¶ä½ ä½¿ç”¨ä¸å¯å˜çš„å¯¹è±¡ï¼Œä¿æŒè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚ å¦‚æžœä¸éœ€è¦ç”Ÿå‘½å‘¨æœŸï¼Œä¸éœ€è¦stateï¼Œè¯·å°½å¯èƒ½å¤šçš„ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶å§ï¼]]></content>
  </entry>
  <entry>
    <title><![CDATA[react-navigation 2.xä½¿ç”¨æŠ€å·§]]></title>
    <url>%2F2018%2F08%2F05%2Freact-navigation%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡æ˜¯åŸºäºŽæœ€æ–°çš„react-navigation^2.5.3æ¥ä¹¦å†™çš„ã€‚ å¦‚æžœåœ¨å­¦ä¹ react-nativeçš„è¿‡ç¨‹ä¸­é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿ŽåŠ å…¥QQç¾¤397885169ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·æˆé•¿ã€‚ è¯†å…”ï¼Œä¸€æ¬¾ç”¨æ¥è¯†åˆ«å›¾ç‰‡çš„å¼€æºé¡¹ç›®ï¼Œåœ¨æœªæ¥è¿˜ä¼šæ·»åŠ æ›´å¤šæœ‰æ„æ€çš„ä¸œè¥¿ è¯†å…”çŽ°å·²é‡æž„ï¼Œå®Œå…¨æŒ‰ç…§ä¸Šçº¿é¡¹ç›®ä½œä¸ºå¼€å‘æ ‡å‡†ï¼Œä½¿ç”¨Mobxç®¡ç†çŠ¶æ€ï¼Œé€‚é…iPhoneXå’Œå®‰å“å„ç§å¼‚å½¢å±ï¼Œè¿˜æœ‰æ›´å¤šæœ‰æ„æ€çš„ä¸œè¥¿ç­‰å¾…æ‚¨çš„å‘çŽ° æ‚¨çš„starå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„å¸®åŠ© react-navigationä½¿ç”¨æŠ€å·§(è¿›é˜¶ç¯‡) ä»€ä¹ˆæ˜¯react-navigation?react-nativeä»Žå¼€æºè‡³ä»Šï¼Œä¸€ç›´å­˜åœ¨å‡ ä¸ªæ— æ³•è§£å†³çš„æ¯›ç—…ï¼Œå¶å°”å°±ä¼šå¤å‘è®©äººéšéšä½œç—›ï¼Œæé†’ä½ ç”¨çš„ä¸æ˜¯åŽŸç”Ÿï¼Œå…¶ä¸­åŒ…æ‹¬åˆ—è¡¨çš„å¤ç”¨é—®é¢˜ï¼Œå¯¼èˆªè·³è½¬ä¸æµç•…çš„é—®é¢˜ç­‰ç­‰ã€‚ç»ˆäºŽfacebookåä¸ä½äº†ï¼Œåœ¨å‰ä¸€æ®µæ—¶é—´å¼€å§‹æŽ¨èä½¿ç”¨react-navigationï¼Œå¹¶ä¸”åœ¨0.44å‘å¸ƒçš„æ—¶å°†ä¹‹å‰ä¸€ç›´å­˜åœ¨çš„NavigatoråºŸå¼ƒäº†ã€‚react-navigationæ˜¯è‡´åŠ›äºŽè§£å†³å¯¼èˆªå¡é¡¿ï¼Œæ•°æ®ä¼ é€’ï¼ŒTabbarå’Œnavigatorå¸ƒå±€ï¼Œæ”¯æŒreduxã€‚è™½ç„¶çŽ°åœ¨åŠŸèƒ½è¿˜ä¸å®Œå–„ï¼Œä½†åŸºæœ¬æ˜¯å¯ä»¥åœ¨é¡¹ç›®ä¸­æŽ¨èä½¿ç”¨çš„ã€‚ å±žæ€§react-navigationåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ã€‚ StackNavigatorç±»ä¼¼é¡¶éƒ¨å¯¼èˆªæ¡ï¼Œç”¨æ¥è·³è½¬é¡µé¢å’Œä¼ é€’å‚æ•°ã€‚ TabNavigatorç±»ä¼¼åº•éƒ¨æ ‡ç­¾æ ï¼Œç”¨æ¥åŒºåˆ†æ¨¡å—ã€‚ DrawerNavigatoræŠ½å±‰ï¼Œç±»ä¼¼ä»ŽAppå·¦ä¾§æ»‘å‡ºä¸€ä¸ªé¡µé¢ï¼Œåœ¨è¿™é‡Œä¸åšè®²è§£ã€‚ ä¸‹é¢ä¼šåˆ†å¼€è®²è§£å®˜ç½‘æä¾›çš„é…ç½®æ–¹æ³•ï¼Œä½†é¡ºåºå¯èƒ½ä¼šå®˜ç½‘ä¸ä¸€æ ·ã€‚ è·ç¦»æˆ‘ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„react-navigationæ•™ç¨‹å·²ç»æœ‰1å¹´å¤šçš„æ—¶é—´äº†ï¼Œè™½ç„¶ä¸€ç›´åœ¨ç¼ç¼è¡¥è¡¥ï¼Œä½†é‚£ä¸ªæ•™ç¨‹çœŸçš„è€äº†ã€‚æ­£å¥½react-navigation V2ç‰ˆæœ¬ä¹Ÿå³å°†è¦æ­£å¼å‘å¸ƒäº†ï¼Œè¶ç€è¿™æ¬¡æœºä¼šé‡æ–°æ¢³ç†ä¸€ä¸‹æ•™ç¨‹ï¼Œå¹¶æŠŠä¹‹å‰çš„å‘å’Œé—æ†¾å¡«è¡¥ä¸€ä¸‹ã€‚ æˆ‘ä¼šå°†æœ¬æ–‡åˆ†æˆä¸‰éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯ä»‹ç»ä½¿ç”¨æŠ€å·§ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å¸¸ç”¨APIï¼Œç¬¬ä¸‰éƒ¨åˆ†æ˜¯å±žæ€§æ–¹æ³•ã€‚ ä½¿ç”¨æŠ€å·§è·³è½¬1234navigate(&apos;Detail&apos;,&#123; title:&apos;å›¾ç‰‡è¯¦æƒ…&apos;, url:item.url, &#125;); Detailï¼šåœ¨StackNavigatorä¸­æ³¨å†Œçš„é¡µé¢ï¼Œéœ€è¦ä¸€ä¸€å¯¹åº”ï¼Œæ‰èƒ½è·³è½¬åˆ°ç›¸åº”çš„é¡µé¢titleï¼šåœ¨è·³è½¬çš„é¡µé¢å¯ä»¥é€šè¿‡this.props.navigation.state.params.titleèŽ·å–åˆ°è¿™ä¸ªå‚æ•°ã€‚å½“ç„¶è¿™ä¸ªå‚æ•°å¯ä»¥éšä¾¿å¡«å†™ï¼Œéƒ½å¯ä»¥é€šè¿‡this.props.navigation.state.params.xxxèŽ·å–ã€‚ æœ€æ–°ç‰ˆæœ¬ä¸­å¯ä»¥é€šè¿‡pushæ¥è·³è½¬é¡µé¢ 1this.props.navigation.push(&apos;Detail&apos;); å›žè°ƒä¼ å‚123456navigate(&apos;Detail&apos;,&#123; // è·³è½¬çš„æ—¶å€™æºå¸¦ä¸€ä¸ªå‚æ•°åŽ»ä¸‹ä¸ªé¡µé¢ callback: (data)=&gt;&#123; console.log(data); // æ‰“å°å€¼ä¸ºï¼š&apos;å›žè°ƒå‚æ•°&apos; &#125; &#125;); 1234const &#123;navigate,goBack,state&#125; = this.props.navigation;// åœ¨ç¬¬äºŒä¸ªé¡µé¢,åœ¨goBackä¹‹å‰,å°†ä¸Šä¸ªé¡µé¢çš„æ–¹æ³•å–åˆ°,å¹¶å›žä¼ å‚æ•°,è¿™æ ·å›žä¼ çš„å‚æ•°ä¼šé‡èµ°renderæ–¹æ³•state.params.callback(&apos;å›žè°ƒå‚æ•°&apos;);goBack(); è‡ªå®šä¹‰å¯¼èˆªæ¡é¡¹ç›®ä¸­åŸºæœ¬æ˜¯æ²¡å¯èƒ½ç”¨è‡ªå¸¦çš„é‚£ä¸ªå¯¼èˆªæ¡çš„ï¼Œè‡ªå¸¦å¯¼èˆªæ¡å·¦ä¾§çš„æŒ‰é’®æ°¸è¿œæ˜¯è“è‰²çš„ï¼Œå¦‚æžœæˆ‘ä»¬éœ€è¦æ›´æ”¹æŒ‰é’®é¢œè‰²ï¼Œå°±éœ€è¦ç”¨åˆ°è‡ªå®šä¹‰çš„åŠŸèƒ½äº†ã€‚ 1234567891011121314151617181920212223const StackOptions = (&#123;navigation&#125;) =&gt; &#123; console.log(navigation); let &#123;state,goBack&#125; = navigation; // ç”¨æ¥åˆ¤æ–­æ˜¯å¦éšè—æˆ–æ˜¾ç¤ºheader const visible= state.params.isVisible; let header; if (visible === true)&#123; header = null; &#125; const headerStyle = &#123;backgroundColor:&apos;#4ECBFC&apos;&#125;; const headerTitle = state.params.title; const headerTitleStyle = &#123;fontSize:FONT_SIZE(20),color:&apos;white&apos;,fontWeight:&apos;500&apos;&#125; const headerBackTitle = false; const headerLeft = ( &lt;Text onPress=&#123;()=&gt;&#123;goBack()&#125;&#125; &gt; è¿”å›ž &lt;/Text&gt; ); return &#123;headerStyle,headerTitle,headerTitleStyle,headerBackTitle,headerLeft,header&#125;&#125;; ç„¶åŽé€šè¿‡ä¸‹é¢çš„æ–¹æ³•è°ƒç”¨å°±å¯ä»¥è‡ªå®šåˆ¶å¯¼èˆªäº†ã€‚ 123456789const MyApp = StackNavigator(&#123; MyTab: &#123; screen: MyTab, &#125;, Detail: &#123; screen: Detail, navigationOptions: (&#123;navigation&#125;) =&gt; StackOptions(&#123;navigation&#125;) &#125;,)&#125;; åœ¨é¡µé¢ä¸­ä½¿ç”¨çš„æ—¶å€™ï¼Œåœ¨è·³è½¬é¡µé¢çš„æ—¶å€™éœ€è¦ä¼ é€’titleå‚æ•°ï¼Œæ‰èƒ½çœ‹åˆ°æ•ˆæžœå“¦ã€‚ è‡ªå®šä¹‰tabbaræ—©ä¸Šæœ‰äººé—®æˆ‘ï¼Œtabbarçš„å›¾æ ‡å¯ä¸å¯ä»¥ä½¿ç”¨åŽŸå›¾ï¼Œé€‰ä¸­çŠ¶æ€ä¸‹å¯ä¸å¯ä»¥è®¾ç½®å…¶ä»–å›¾æ ‡ã€‚ç ”ç©¶äº†ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£ï¼Œå‘çŽ°tabBarIconé™¤äº†tintColorè¿˜æœ‰å¦ä¸€ä¸ªå±žæ€§ï¼Œç”¨æ¥åˆ¤æ–­é€‰ä¸­çŠ¶æ€çš„focusedã€‚ 12345678910111213tabBarIcon: (&#123;tintColor,focused&#125;) =&gt; ( focused ? &lt;Image source=&#123;&#123;uri : &apos;è¯†å…”&apos;&#125;&#125; style=&#123;tabBarIcon&#125; /&gt; : &lt;Image source=&#123;&#123;uri : &apos;å¹²è´§&apos;&#125;&#125; style=&#123;[tabBarIcon, &#123;tintColor: tintColor&#125;]&#125; /&gt; ), é€šè¿‡åˆ¤æ–­focusedï¼Œé€‰ä¸­çŠ¶æ€ä¸‹ä½¿ç”¨è¯†å…”å›¾æ ‡ï¼Œæœªé€‰ä¸­çŠ¶æ€ä½¿ç”¨å¹²è´§å›¾æ ‡ã€‚å¦‚æžœæƒ³ä½¿ç”¨å›¾æ ‡åŽŸæ¥çš„æ ·å­ï¼Œé‚£å°±å°†styleçš„tintColoråŽ»æŽ‰ï¼Œè¿™æ ·å°±ä¼šæ˜¾ç¤ºå›¾æ ‡åŽŸæœ¬çš„é¢œè‰²ã€‚ å†å°è£…12345678910111213141516171819202122232425export const TabOptions = (tabBarTitle,normalImage,selectedImage,navTitle) =&gt; &#123; // console.log(navigation); const tabBarLabel = tabBarTitle; console.log(navTitle); const tabBarIcon = ((&#123;tintColor,focused&#125;)=&gt; &#123; return( focused ? &lt;Image source=&#123;&#123;uri : normalImage&#125;&#125; style=&#123;[TabBarIcon, &#123;tintColor: tintColor&#125;]&#125; /&gt; : &lt;Image source=&#123;&#123;uri : selectedImage&#125;&#125; style=&#123;[TabBarIcon, &#123;tintColor: tintColor&#125;]&#125; /&gt; ) &#125;); const headerTitle = navTitle; const headerTitleStyle = &#123;fontSize:FONT_SIZE(20),color:&apos;white&apos;&#125;; // headerçš„style const headerStyle = &#123;backgroundColor:&apos;#4ECBFC&apos;&#125;; return &#123;tabBarLabel,tabBarIcon,headerTitle,headerTitleStyle,headerStyle&#125;;&#125;; åœ¨staticä¸­ä½¿ç”¨thisæ–¹æ³•æˆ‘ä¹‹å‰æ–‡ç« ä¸­æ˜¯å°†navaigationOptionsçš„æ–¹æ³•å†™åœ¨äº†app.jsä¸­ï¼Œæ²¡æœ‰åœ¨é¡µé¢ä¸­é€šè¿‡static navaigationOptionsæ¥åˆå§‹åŒ–é¡µé¢ï¼Œè¿™æ®µæ—¶é—´åˆšå¥½æœ‰äººé—®ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå°±å†™ä¸€ä¸‹è¯¥æ€Žä¹ˆå¼„ã€‚ é¦–å…ˆéœ€è¦åœ¨componentDidMount(){}ä¸­åŠ¨æ€çš„æ·»åŠ ç‚¹å‡»äº‹ä»¶12345678å±žæ€§ç»™paramscomponentDidMount()&#123; this.props.navigation.setParams(&#123; title:&apos;è‡ªå®šä¹‰Header&apos;, navigatePress:this.navigatePress &#125;)&#125; 1234navigatePress = () =&gt; &#123; alert(&apos;ç‚¹å‡»headerRight&apos;); console.log(this.props.navigation);&#125; æŽ¥ä¸‹æ¥å°±å¯ä»¥é€šè¿‡paramsæ–¹æ³•æ¥èŽ·å–ç‚¹å‡»äº‹ä»¶äº†12345678static navigationOptions = (&#123; navigation, screenProps &#125;) =&gt; (&#123; title: navigation.state.params?navigation.state.params.title:null, headerRight:( &lt;Text onPress=&#123;navigation.state.params?navigation.state.params.navigatePress:null&#125;&gt; è¿”å›ž &lt;/Text&gt; )&#125;); è®©å®‰å“å®žçŽ°pushåŠ¨ç”»ï¼Œå¹¶å¯ä»¥æ»‘åŠ¨è¿”å›žä¹‹å‰ç¾¤é‡Œçš„è®¨è®ºæ€Žä¹ˆè®©å®‰å“å®žçŽ°ç±»ä¼¼iOSçš„pushåŠ¨ç”»ï¼Œç ”ç©¶äº†2.xç‰ˆæœ¬çš„å®žçŽ°åŽï¼ŒçœŸçš„å®žçŽ°äº†ï¼Œåœ¨è¿™é‡Œå…±äº«ä¸‹ 1234567891011121314151617// åœ¨2.xç‰ˆæœ¬ä¸­ï¼Œéœ€è¦å¼•å…¥ä¸‹é¢çš„æ–¹æ³•import StackViewStyleInterpolator from &apos;react-navigation/src/views/StackView/StackViewStyleInterpolator&apos;;// åœ¨StackNavigatoré…ç½®headerModeçš„åœ°æ–¹ï¼Œä½¿ç”¨transitionConfigæ·»åŠ &#123; // è¿™ä¸ªå†™æ³•æ˜¯é»˜è®¤åŽ»æŽ‰è‡ªå¸¦çš„å¯¼èˆªæ ï¼Œå¹¶ä¸”è®©æ»‘åŠ¨è¿”å›žåŠ¨ç”»ç”Ÿæ•ˆï¼Œå¦‚æžœä¸æƒ³åŽ»æŽ‰è‡ªå¸¦çš„å¯¼èˆªï¼Œåˆ æŽ‰header: nullå°±å¯ä»¥äº† navigationOptions: () =&gt; (&#123; header: null, gesturesEnabled: true, &#125;), headerMode: &apos;screen&apos;, // react-navigationä¸­ä¸€å…±å®žçŽ°äº†å››ç§åŠ¨ç”»ï¼Œæœ‰éœ€è¦çš„å¯ä»¥åŽ»è¿›é˜¶ç¯‡ä¸­æŸ¥çœ‹ã€‚ transitionConfig:() =&gt; (&#123; screenInterpolator: StackViewStyleInterpolator.forHorizontal, &#125;)&#125; å®‰å“ä¸Šï¼Œä½¿ç”¨TextInputçš„æ—¶å€™ä¼šè®©TabBaré¡¶èµ·æ¥çš„è§£å†³åŠžæ³•æœ€ç®€å•çš„è§£å†³åŠžæ³•å°±æ˜¯åœ¨androidç›®å½•ä¸­ï¼Œæ·»åŠ ä¸€å¥è¯ ç›®å½•ï¼šandroid/app/src/main/AndroidManifest.xmlä¸­ï¼Œæ·»åŠ  1android:windowSoftInputMode=&quot;stateAlwaysHidden|adjustPan|adjustResize&quot; psï¼šåœ¨iOSä¸‹å¦‚æžœæƒ³ä¸€åŠ³æ°¸é€¸çš„è§£å†³é”®ç›˜é—®é¢˜ï¼Œè¯·ä½¿ç”¨IQKeyBoardManagerã€‚ APIcreateSwitchNavigator SwitchNavigatorçš„ç›®çš„æ˜¯ä¸€æ¬¡åªæ˜¾ç¤ºä¸€ä¸ªå±å¹•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¸å¤„ç†å›žé€€æ“ä½œï¼Œå¹¶åœ¨æ‚¨åˆ‡æ¢æ—¶å°†è·¯ç”±é‡ç½®ä¸ºé»˜è®¤çŠ¶æ€ã€‚è¿™æ˜¯æˆ‘ä»¬ä»Žç™»å½•æµç¨‹ï¼ˆåŒ…å«æ³¨å†Œï¼Œç™»å½•ï¼Œå¿˜è®°å¯†ç ç­‰ï¼‰åˆ°ä¸»å±å¹•çš„å¿…è¦æµç¨‹ã€‚è¿™ä¸ªæ–¹æ³•åœ¨1.xä¸­å«åšSwitchNavigatorï¼Œåœ¨2.xä¸­ç»Ÿä¸€å‘½åä¸ºcreateSwitchNavigator 1createSwitchNavigator(RouteConfigs, SwitchNavigatorConfig); RouteConfigs è·¯ç”±çš„é…ç½®è¡¨ï¼Œè¯¦ç»†é…ç½®å¯ä»¥å‚è€ƒä¸‹é¢çš„createStackNavigator SwitchNavigatorConfig SwitchNavigatorå±žæ€§ initialRouteName - ç¬¬ä¸€æ¬¡åŠ è½½æ—¶åˆå§‹é€‰é¡¹å¡è·¯ç”±çš„routeNameã€‚ resetOnBlur - åˆ‡æ¢ç¦»å¼€å±å¹•æ—¶ï¼Œé‡ç½®æ‰€æœ‰åµŒå¥—å¯¼èˆªå™¨çš„çŠ¶æ€ã€‚é»˜è®¤ä¸ºtrueã€‚ paths - æä¾›routeNameåˆ°pathçš„æ·±åº¦é“¾æŽ¥ï¼Œå®ƒä¼šè¦†ç›–RouteConfigsä¸­è®¾ç½®çš„è·¯å¾„ã€‚ backBehavior - åŽé€€æŒ‰é’®æ˜¯å¦ä¼šå¯¼è‡´æ ‡ç­¾åˆ‡æ¢åˆ°åˆå§‹è·¯ç”±ï¼Ÿå¦‚æžœæ˜¯ï¼Œåˆ™è®¾ç½®ä¸ºinitialRouteï¼Œå¦åˆ™noneã€‚é»˜è®¤ä¸ºnoneã€‚ 12345678910export default createSwitchNavigator( &#123; AuthLoading: AuthLoadingScreen, App: AppStack, Auth: AuthStack, &#125;, &#123; initialRouteName: &apos;AuthLoading&apos;, &#125;); createStackNavigator é…ç½®è·¯ç”±å±žæ€§å’Œå‚æ•°è¿™ä¸ªæ–¹æ³•åœ¨1.xä¸­å«åšStackNavigatorï¼Œåœ¨2.xä¸­ç»Ÿä¸€å‘½åä¸ºcreateStackNavigator 1createStackNavigator(RouteConfigs, StackNavigatorConfig); RouteConfigs screen - å¯¹åº”ç•Œé¢åç§°ï¼Œæ˜¯ä¸€ä¸ªReactç»„ä»¶ path - æ·±åº¦é“¾æŽ¥è·¯å¾„ï¼Œä»Žå…¶ä»–Appæˆ–è€…webè·³è½¬åˆ°è¯¥Appéœ€è¦è®¾ç½®è¯¥è·¯å¾„ navigationOptions - ç”¨äºŽå±å¹•çš„é»˜è®¤å¯¼èˆªé€‰é¡¹ StackNavigatorConfigå¯é€‰çš„è·¯ç”±å±žæ€§ initialRouteName - è®¾ç½®é»˜è®¤å±å¹•ã€‚å¿…é¡»ä¸ºè·¯ç”±é…ç½®ä¸­çš„æŸä¸ªscreenã€‚ initialRouteParams - åˆå§‹è·¯ç”±è·¯çº¿çš„å‚æ•°ã€‚ navigationOptions - ç”¨äºŽå±å¹•çš„é»˜è®¤å¯¼èˆªé€‰é¡¹ã€‚ paths - è¦†ç›–è·¯ç”±é…ç½®ä¸­è®¾ç½®çš„è·¯å¾„çš„æ˜ å°„ã€‚ å¯é€‰çš„è§†è§‰é€‰é¡¹ mode - å®šä¹‰æ¸²æŸ“å’Œè½¬æ¢çš„æ ·å¼ card - ä½¿ç”¨æ ‡å‡†çš„iOSå’ŒAndroidå±å¹•è½¬æ¢ã€‚è¿™æ˜¯é»˜è®¤å±žæ€§ã€‚ modal - ä½¿å±å¹•ä»Žåº•éƒ¨æ»‘å…¥ï¼Œè¿™æ˜¯ä¸€ç§å¸¸è§çš„iOSæ¨¡å¼ã€‚åªé€‚ç”¨äºŽiOSï¼Œå¯¹Androidæ²¡æœ‰å½±å“ã€‚ headerMode - å®šä¹‰å¦‚ä½•å‘ˆçŽ°æ ‡é¢˜ float - åœ¨å±å¹•æ›´æ”¹æ—¶æ¸²æŸ“ä¿ç•™åœ¨é¡¶éƒ¨çš„å•ä¸ªæ ‡é¢˜å’ŒåŠ¨ç”»ã€‚è¿™æ˜¯iOSä¸Šçš„å¸¸è§æ•ˆæžœã€‚ screen - æ¯ä¸ªå±å¹•éƒ½é™„æœ‰ä¸€ä¸ªæ ‡é¢˜ï¼Œæ ‡é¢˜ä¸Žå±å¹•ä¸€èµ·æ·¡å…¥å’Œæ·¡å‡ºã€‚è¿™æ˜¯Androidä¸Šçš„å¸¸è§æ•ˆæžœã€‚ none - ä¸ä¼šæ˜¾ç¤ºæ ‡é¢˜ã€‚ headerTransitionPreset - æŒ‡å®šæ ‡é¢˜åœ¨headerMode: floatå¯ç”¨æ—¶åº”è¯¥å¦‚ä½•ä»Žä¸€ä¸ªå±å¹•åˆ‡æ¢åˆ°å¦ä¸€ä¸ªå±å¹•ã€‚ fade-in-place - æ ‡é¢˜ç»„ä»¶åœ¨ä¸ç§»åŠ¨çš„æƒ…å†µä¸‹æ·¡å…¥æ·¡å‡ºï¼Œç±»ä¼¼äºŽiOSçš„Twitterï¼ŒInstagramå’ŒFacebookåº”ç”¨ç¨‹åºã€‚è¿™æ˜¯é»˜è®¤å€¼ã€‚ uikit - iOSçš„é»˜è®¤æ•ˆæžœã€‚ cardStyle - ä½¿ç”¨æ­¤é“å…·è¦†ç›–æˆ–æ‰©å±•å †æ ˆä¸­å•ä¸ªå¡çš„é»˜è®¤æ ·å¼ã€‚ transitionConfig - å‡½æ•°è¿”å›žä¸Žé»˜è®¤å±å¹•è½¬æ¢åˆå¹¶çš„å¯¹è±¡ï¼ˆæŸ¥çœ‹ç±»åž‹å®šä¹‰ä¸­çš„TransitionConfig ï¼‰ã€‚æä¾›çš„å‡½æ•°å°†ä¼ é€’ä»¥ä¸‹å‚æ•°ï¼š transitionProps - æ–°å±å¹•çš„è¿‡æ¸¡è½¬æ¢ã€‚ prevTransitionProps - æ—§å±å¹•çš„è¿‡æ¸¡è½¬æ¢ã€‚ isModal - æŒ‡å®šå±å¹•æ˜¯å¦ä¸ºæ¨¡æ€ã€‚ onTransitionStart - è·³è½¬åŠ¨ç”»å³å°†å¼€å§‹æ—¶è¦è°ƒç”¨çš„å‡½æ•°ã€‚ onTransitionEnd - è·³è½¬åŠ¨ç”»å®ŒæˆåŽè°ƒç”¨çš„å‡½æ•°ã€‚ navigationOptions å¯¼èˆªé¡µé¢çš„å±žæ€§å’Œæ–¹æ³• title - å¯ç”¨ä½œçš„headerBackTitleçš„æ ‡é¢˜ã€‚æ­¤å¤–ï¼Œå°†ç”¨ä½œtabBarLabelï¼ˆå¦‚æžœåµŒå¥—åœ¨TabNavigatorä¸­ï¼‰æˆ–drawerLabelï¼ˆå¦‚æžœåµŒå¥—åœ¨DrawerNavigatorä¸­ï¼‰çš„å›žé€€æ ‡é¢˜ã€‚ header - è¿”å›žä¸€ä¸ªReactå…ƒç´ ï¼Œç”¨æ¥ä½œä¸ºæ ‡é¢˜ã€‚è®¾ç½®nullä¼šéšè—æ ‡é¢˜ã€‚ headerTitle - å¯ä»¥ä¼ å…¥å­—ç¬¦ä¸²ï¼ŒReact Elementï¼ŒReact Componentã€‚é»˜è®¤æ˜¯ç”¨ä¸Šé¢çš„titleä½œä¸ºæ ‡é¢˜ã€‚å½“ä½¿ç”¨Componentæ—¶ï¼Œå®ƒæŽ¥å—allowFontScalingï¼Œstyleå’Œchildrenä½œä¸ºå±žæ€§ã€‚titleä¼šè¢«æ”¾åœ¨childrenä¸­ã€‚ headerTitleAllowFontScaling - æ ‡é¢˜å­—ä½“æ˜¯å¦åº”è¯¥ç¼©æ”¾ä»¥éµå¾ªç³»ç»Ÿè®¾ç½®ã€‚é»˜è®¤å€¼ä¸ºtrueã€‚ headerBackImage - æŽ¥å—React Elementæˆ–è€…Componentç”¨æ¥æ˜¾ç¤ºè‡ªå®šä¹‰çš„åŽé€€æŒ‰é’®ä¸­çš„å›¾ç‰‡ã€‚å½“ä½¿ç”¨ç»„ä»¶æ—¶ï¼Œå®ƒä¼šå¾—åˆ°(tintColorï¼Œtitle)å‚æ•°ã€‚é»˜è®¤ä¸ºreact-navigation/views/assets/back-icon.pngè·¯å¾„ä¸‹çš„å›¾ç‰‡ï¼Œè¿™æ˜¯åŒºåˆ†å¹³å°çš„é»˜è®¤å›¾æ ‡ã€‚ headerBackTitle - iOSä¸ŠåŽé€€æŒ‰é’®ä½¿ç”¨çš„æ–‡å­—ï¼Œä¼ é€’nullä¼šç¦ç”¨æ ‡ç­¾ã€‚é»˜è®¤ä¸ºå‰ä¸€åœºæ™¯headerTitleã€‚ headerTruncatedBackTitle - å½“åŽé€€æŒ‰é’®ä½¿ç”¨çš„æ ‡é¢˜å­—ç¬¦ä¸²headerBackTitleä¸é€‚åˆå±å¹•æ—¶(æ¯”å¦‚è¯´æ–‡å­—è¿‡é•¿)ï¼Œä¼šé»˜è®¤æ˜¾ç¤ºBackã€‚ headerRight - æŽ¥å—React Elementå°†ä¼šæ˜¾ç¤ºåœ¨æ ‡é¢˜çš„å³ä¾§ã€‚ headerLeft - æŽ¥å—React Elementæˆ–è€…React Componentå°†ä¼šæ˜¾ç¤ºåœ¨æ ‡é¢˜çš„å·¦ä¾§ã€‚å½“ä¼ é€’ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œä¼šå¾—åˆ°ï¼ˆonPressï¼Œtitleï¼ŒtitleStyleè¿˜æœ‰æ›´å¤šï¼Œè¯·å‚è€ƒHeader.jsä»¥èŽ·å¾—å®Œæ•´çš„åˆ—è¡¨ï¼‰ã€‚ headerStyle - æ ‡é¢˜çš„æ ·å¼ headerForceInset - å…è®¸å°†forceInsetå¯¹è±¡ä¼ é€’ç»™æ ‡é¢˜ä¸­ï¼Œä½¿ç”¨çš„å†…éƒ¨SafeAreaViewã€‚ headerTitleStyle - æ ‡é¢˜ç»„ä»¶çš„æ ·å¼ headerBackTitleStyle - æ ‡é¢˜ä¸ŠåŽé€€æŒ‰é’®æ–‡å­—æ ·å¼ headerTintColor - æ ‡é¢˜ç»„ä»¶çš„è‰²è°ƒ headerPressColorAndroid - æè´¨çº¹æ³¢çš„é¢œè‰²ï¼ˆä»…é™Android&gt; = 5.0ï¼‰ headerTransparent - é»˜è®¤ä¸ºfalseã€‚å¦‚æžœä¸ºtrueæ ‡é¢˜å°†æ²¡æœ‰èƒŒæ™¯ï¼Œé™¤éžä½ æ˜Žç¡®æä¾›äº†headerStyleæˆ–headerBackgroundã€‚ headerBackground - å°†æ­¤ä¸ŽheaderTransparentä¸€èµ·ä½¿ç”¨ï¼Œä»¥æä¾›ä¸€ä¸ªç»„ä»¶åœ¨æ ‡é¢˜çš„èƒŒæ™¯ä¸­å‘ˆçŽ°ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å°†å…¶ç”¨äºŽæ¨¡ç³Šè§†å›¾ï¼Œä»¥åˆ›å»ºåŠé€æ˜Žæ ‡é¢˜ã€‚ gesturesEnabled - æ˜¯å¦å¯ä»¥ä½¿ç”¨æ‰‹åŠ¿æ¥è¿”å›žåˆ°ä¸Šä¸€é¡µã€‚åœ¨iOSä¸Šé»˜è®¤ä¸ºtrueï¼Œåœ¨Androidä¸Šä¸ºfalseã€‚ gestureResponseDistance - ç”¨äºŽè¦†ç›–è§¦æ‘¸ä»Žå±å¹•è¾¹ç¼˜å¼€å§‹è¯†åˆ«æ‰‹åŠ¿çš„è·ç¦»çš„å¯¹è±¡ã€‚å®ƒå…·æœ‰ä»¥ä¸‹å±žæ€§ï¼š horizontal - number - æ°´å¹³æ–¹å‘çš„è·ç¦»ã€‚é»˜è®¤ä¸º25ã€‚ vertical - number - åž‚ç›´æ–¹å‘çš„è·ç¦»ã€‚é»˜è®¤ä¸º135ã€‚ gestureDirection - ä¼ é€’å­—ç¬¦ä¸²ç”¨æ¥è¦†ç›–å…³é—­æ‰‹åŠ¿çš„æ–¹å‘ã€‚defaultä¸ºæ­£å¸¸è¡Œä¸ºæˆ–invertedä»Žå³åˆ°å·¦æ»‘åŠ¨ã€‚ Navigator Props ç”±StackNavigatorï¼ˆâ€¦ï¼‰åˆ›å»ºçš„å¯¼èˆªå™¨ç»„ä»¶æ‹¥æœ‰ä¸‹é¢çš„å±žæ€§ï¼š screenProps - å°†å…¶ä»–é€‰é¡¹ä¼ é€’ç»™å­å±å¹• createTabNavigator createTabNavigatorå·²å¼ƒç”¨ã€‚è¯·æ”¹ç”¨createBottomTabNavigatorå’Œ/æˆ–createMaterialTopTabNavigatorã€‚ createBottomTabNavigator å±å¹•åº•éƒ¨çš„ç®€å•æ ‡ç­¾æ ï¼Œå¯è®©æ‚¨åœ¨ä¸åŒè·¯ç”±ä¹‹é—´åˆ‡æ¢ã€‚è·¯ç”±æ˜¯è¢«æ‡’æƒ°åˆå§‹åŒ–çš„ - å®ƒä»¬çš„å±å¹•ç»„ä»¶ç›´åˆ°ç¬¬ä¸€æ¬¡é€‰ä¸­æ—¶æ‰ä¼šåˆå§‹åŒ–ã€‚è¿™ä¸ªæ–¹æ³•åœ¨1.xä¸­å«åšTabNavigatorï¼Œåœ¨2.xä¸­ç»Ÿä¸€å‘½åä¸ºcreateBottomTabNavigator 1createBottomTabNavigator(RouteConfigs, BottomTabNavigatorConfig); RouteConfigs å±žæ€§è¯·å‚è€ƒcreateStackNavigatorã€‚å®ƒçš„navigationOptionså’ŒcreateStackNavigatorä¸ä¸€æ ·ï¼Œä¸‹é¢ä¼šæœ‰è¯´æ˜Žã€‚ BottomTabNavigatorConfig initialRouteName - ç¬¬ä¸€æ¬¡åŠ è½½æ—¶åˆå§‹é€‰é¡¹å¡è·¯ç”±çš„routeNameã€‚ order - å®šä¹‰é€‰é¡¹å¡é¡ºåºçš„routeNamesæ•°ç»„ã€‚ paths - æä¾›routeNameåˆ°pathçš„æ·±åº¦é“¾æŽ¥ï¼Œå®ƒä¼šè¦†ç›–RouteConfigsä¸­è®¾ç½®çš„è·¯å¾„ã€‚ backBehavior - åŽé€€æŒ‰é’®æ˜¯å¦ä¼šå¯¼è‡´æ ‡ç­¾åˆ‡æ¢åˆ°åˆå§‹è·¯ç”±ï¼Ÿå¦‚æžœæ˜¯ï¼Œåˆ™è®¾ç½®ä¸ºinitialRouteï¼Œå¦åˆ™noneã€‚é»˜è®¤ä¸ºinitialRouteã€‚ tabBarComponent - Optionsï¼Œè¦†ç›–ç”¨ä½œæ ‡ç­¾æ çš„ç»„ä»¶ã€‚ tabBarOptions - æ ‡ç­¾æ å…·æœ‰å¦‚ä¸‹å±žæ€§ï¼š activeTintColor - æ´»åŠ¨é€‰é¡¹å¡çš„æ ‡ç­¾å’Œå›¾æ ‡é¢œè‰²ã€‚(é€‰ä¸­) activeBackgroundColor - æ´»åŠ¨é€‰é¡¹å¡çš„èƒŒæ™¯é¢œè‰²ã€‚(é€‰ä¸­) inactiveTintColor - éžæ´»åŠ¨é€‰é¡¹å¡çš„æ ‡ç­¾å’Œå›¾æ ‡é¢œè‰²ã€‚(æœªé€‰ä¸­) inactiveBackgroundColor - éžæ´»åŠ¨é€‰é¡¹å¡çš„èƒŒæ™¯é¢œè‰²ã€‚(æœªé€‰ä¸­) showLabel - æ˜¯å¦æ˜¾ç¤ºæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºtrueã€‚ style - æ ‡ç­¾æ çš„æ ·å¼ã€‚ labelStyle - æ ‡ç­¾æ æ–‡å­—çš„æ ·å¼ã€‚ tabStyle - é€‰é¡¹å¡çš„æ ·å¼ã€‚ allowFontScaling - æ ‡é¢˜å­—ä½“æ˜¯å¦åº”è¯¥ç¼©æ”¾ä»¥éµå¾ªç³»ç»Ÿè®¾ç½®ã€‚é»˜è®¤å€¼ä¸ºtrueã€‚ navigationOptions æ ‡ç­¾æ çš„å±žæ€§å’Œæ–¹æ³• title - é€šç”¨æ ‡é¢˜å¯ä»¥ç”¨ä½œheaderTitleå’ŒtabBarLabelã€‚ tabBarVisible - æ˜¾ç¤ºæˆ–éšè—åº•éƒ¨æ ‡ç­¾æ ï¼Œé»˜è®¤ä¸ºtrueï¼Œä¸éšè—ã€‚ tabBarIcon - React Elementæˆ–ç»™å®š{focusedï¼šbooleanï¼ŒtintColorï¼šstring}çš„å‡½æ•°è¿”å›žä¸€ä¸ªReact.Nodeï¼Œç”¨æ¥æ˜¾ç¤ºåœ¨æ ‡ç­¾æ ä¸­ã€‚ tabBarLabel - æŽ¥æ”¶å­—ç¬¦ä¸²ã€React Elementæˆ–è€…ç»™å®š{focusedï¼šbooleanï¼ŒtintColorï¼šstring}çš„å‡½æ•°è¿”å›žä¸€ä¸ªReact.Nodeï¼Œç”¨æ¥æ˜¾ç¤ºåœ¨æ ‡ç­¾æ ä¸­ã€‚å¦‚æžœæœªå®šä¹‰ï¼Œä¼šä½¿ç”¨titleä½œä¸ºé»˜è®¤å€¼ã€‚å¦‚æžœæƒ³è¦éšè—ï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„tabBarOptions.showLabelã€‚ tabBarOnPress - æ ‡ç­¾æ ç‚¹å‡»äº‹ä»¶å›žè°ƒï¼ŒæŽ¥å—ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å¦‚ä¸‹ï¼š 1234567891011121314tabBarOnPress: async (obj: any) =&gt; &#123; console.log(obj); try &#123; const userData = await AsyncStorage.getItem(&apos;USER_INFO&apos;); if (userData) &#123; obj.defaultHandler(); &#125; else &#123; obj.navigation.navigate(&apos;Login&apos;); &#125; &#125; catch (e) &#123; Toast.show(e.message, &apos;center&apos;, 1000); &#125; &#125; createMaterialTopTabNavigator å®žçŽ°äº†ç±»ä¼¼react-native-scrollable-tab-viewçš„å·¦å³æ»šåŠ¨æ•ˆæžœï¼Œä½†æ¯ä¸ªtabé¡µæ˜¯æ²¡æœ‰æ‡’åŠ è½½çš„ï¼Œå°±æ˜¯è¯´ï¼Œå½“ä½¿ç”¨è¿™ä¸ªç”Ÿæˆå¯¼èˆªçš„æ—¶å€™ï¼Œæ¯ä¸ªé¡µé¢éƒ½ä¼šåˆå§‹åŒ–ï¼Œå¯¹å†…å­˜å½±å“è¾ƒå¤§ã€‚è¿™ä¸ªå¯¼èˆªæ˜¯åŸºäºŽreact-native-tab-viewå®žçŽ°çš„ï¼Œå¦‚æžœæœ‰éœ€è¦å¯ä»¥ç ”ç©¶ã€‚ 1createMaterialTopTabNavigator(RouteConfigs, TabNavigatorConfig); RouteConfigs å±žæ€§è¯·å‚è€ƒcreateStackNavigatorã€‚ TabNavigatorConfig initialRouteName - ç¬¬ä¸€æ¬¡åŠ è½½æ—¶åˆå§‹é€‰é¡¹å¡è·¯ç”±çš„routeNameã€‚ order - å®šä¹‰é€‰é¡¹å¡é¡ºåºçš„routeNamesæ•°ç»„ã€‚ paths - æä¾›routeNameåˆ°pathçš„æ·±åº¦é“¾æŽ¥ï¼Œå®ƒä¼šè¦†ç›–RouteConfigsä¸­è®¾ç½®çš„è·¯å¾„ã€‚ backBehavior - åŽé€€æŒ‰é’®æ˜¯å¦ä¼šå¯¼è‡´æ ‡ç­¾åˆ‡æ¢åˆ°åˆå§‹è·¯ç”±ï¼Ÿå¦‚æžœæ˜¯ï¼Œåˆ™è®¾ç½®ä¸ºinitialRouteï¼Œå¦åˆ™noneã€‚é»˜è®¤ä¸ºinitialRouteã€‚ swipeEnabled - æ˜¯å¦å…è®¸åœ¨æ ‡ç­¾ä¹‹é—´æ»‘åŠ¨ã€‚ animationEnabled - æ”¹å˜æ ‡ç­¾æ—¶æ˜¯å¦ä½¿ç”¨åŠ¨ç”»ã€‚ configureTransition - ç»™å®šcurrentTransitionPropså’ŒnextTransitionPropsè¿”å›žä¸€ä¸ªæè¿°é€‰é¡¹å¡ä¹‹é—´åŠ¨ç”»çš„é…ç½®å¯¹è±¡çš„å‡½æ•°ã€‚ initialLayout - åŒ…å«åˆå§‹heightå’Œå¯é€‰å¯¹è±¡widthï¼Œå¯ä»¥ä¼ é€’ä»¥é˜²æ­¢react-native-tab-viewå‡ºçŽ°ä¸€å¸§çš„å»¶è¿Ÿã€‚ tabBarComponent - Optionsï¼Œè¦†ç›–ç”¨ä½œæ ‡ç­¾æ çš„ç»„ä»¶ã€‚ tabBarOptions - æ ‡ç­¾æ å…·æœ‰å¦‚ä¸‹å±žæ€§ï¼š activeTintColor - æ´»åŠ¨é€‰é¡¹å¡çš„æ ‡ç­¾å’Œå›¾æ ‡é¢œè‰²ã€‚(é€‰ä¸­) inactiveTintColor - éžæ´»åŠ¨é€‰é¡¹å¡çš„æ ‡ç­¾å’Œå›¾æ ‡é¢œè‰²ã€‚(æœªé€‰ä¸­) showIcon - æ˜¯å¦æ˜¾ç¤ºæ ‡ç­¾å›¾æ ‡ï¼Œé»˜è®¤ä¸ºfalseã€‚ showLabel - æ˜¯å¦æ˜¾ç¤ºæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºtrueã€‚ upperCaseLabel - æ˜¯å¦ä½¿æ ‡ç­¾å¤§å†™ï¼Œé»˜è®¤ä¸ºtrueã€‚ pressColor - çº¹æ³¢çš„é¢œè‰²ï¼ˆä»…é™Android&gt; = 5.0ï¼‰ã€‚ pressOpacity - æŒ‰ä¸‹æ ‡ç­¾çš„ä¸é€æ˜Žåº¦ï¼ˆä»…iOSå’ŒAndroid &lt;5.0ï¼‰ã€‚ scrollEnabled - æ˜¯å¦å¯ç”¨å¯æ»šåŠ¨æ ‡ç­¾ã€‚ tabStyle - é€‰é¡¹å¡çš„æ ·å¼ã€‚ indicatorStyle - é€‰é¡¹å¡æŒ‡ç¤ºç¬¦çš„æ ·å¼ï¼ˆé€‰é¡¹å¡åº•éƒ¨çº¿çš„é¢œè‰²ï¼‰ã€‚ labelStyle - æ ‡ç­¾æ æ–‡å­—çš„æ ·å¼ã€‚ iconStyle - é€‰é¡¹å¡å›¾æ ‡çš„æ ·å¼ã€‚ style - æ ‡ç­¾æ çš„æ ·å¼ã€‚ allowFontScaling - æ ‡é¢˜å­—ä½“æ˜¯å¦åº”è¯¥ç¼©æ”¾ä»¥éµå¾ªç³»ç»Ÿè®¾ç½®ã€‚é»˜è®¤å€¼ä¸ºtrueã€‚ navigationOptions title - é€šç”¨æ ‡é¢˜å¯ä»¥ç”¨ä½œheaderTitleå’ŒtabBarLabelã€‚ swipeEnabled - å¦‚æžœæœªè®¾ç½®ï¼Œåˆ™éµå¾ªTabNavigatorConfigé€‰é¡¹swipeEnabledã€‚å¯ç”¨æˆ–ç¦ç”¨æ ‡ç­¾ä¹‹é—´çš„æ»‘åŠ¨æ“ä½œä¸ºtrueæˆ–falseã€‚ tabBarIcon - React Elementæˆ–ç»™å®š{focusedï¼šbooleanï¼ŒtintColorï¼šstring}çš„å‡½æ•°è¿”å›žä¸€ä¸ªReact.Nodeï¼Œç”¨æ¥æ˜¾ç¤ºåœ¨æ ‡ç­¾æ ä¸­ã€‚ tabBarLabel - æŽ¥æ”¶å­—ç¬¦ä¸²ã€React Elementæˆ–è€…ç»™å®š{focusedï¼šbooleanï¼ŒtintColorï¼šstring}çš„å‡½æ•°è¿”å›žä¸€ä¸ªReact.Nodeï¼Œç”¨æ¥æ˜¾ç¤ºåœ¨æ ‡ç­¾æ ä¸­ã€‚å¦‚æžœæœªå®šä¹‰ï¼Œä¼šä½¿ç”¨titleä½œä¸ºé»˜è®¤å€¼ã€‚å¦‚æžœæƒ³è¦éšè—ï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„tabBarOptions.showLabelã€‚ tabBarOnPress - æ ‡ç­¾æ ç‚¹å‡»äº‹ä»¶å›žè°ƒï¼ŒæŽ¥å—ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å¦‚ä¸‹ï¼š 1234567891011121314tabBarOnPress: async (obj: any) =&gt; &#123; console.log(obj); try &#123; const userData = await AsyncStorage.getItem(&apos;USER_INFO&apos;); if (userData) &#123; obj.defaultHandler(); &#125; else &#123; obj.navigation.navigate(&apos;Login&apos;); &#125; &#125; catch (e) &#123; Toast.show(e.message, &apos;center&apos;, 1000); &#125; &#125; createDrawerNavigator åˆ›å»ºä¾§è¾¹æ å¯¼èˆªï¼Œæœ‰ä¸€äº›å‘ï¼Œéœ€è¦ç”¨è¿‡æ‰çŸ¥é“ã€‚ 1createDrawerNavigator(RouteConfigs, DrawerNavigatorConfig) RouteConfigs å±žæ€§è¯·å‚è€ƒcreateStackNavigatorã€‚ DrawerNavigatorConfig drawerWidth - æŠ½å±‰çš„å®½åº¦æˆ–è¿”å›žä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚ drawerPosition - æŠ½å±‰å‡ºçŽ°çš„æ–¹å‘leftæˆ–rightï¼Œé»˜è®¤leftã€‚ contentComponent - ç”¨äºŽå‘ˆçŽ°æŠ½å±‰å†…å®¹çš„ç»„ä»¶ï¼Œä¾‹å¦‚å¯¼èˆªé¡¹ã€‚æŽ¥æ”¶navigationæŠ½å±‰çš„å±žæ€§ã€‚é»˜è®¤ä¸ºDrawerItemsã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ä¸‹æ–‡ã€‚ contentOptions - é…ç½®æŠ½å±‰å†…å®¹ï¼Œè¯·å‚è§ä¸‹æ–‡ã€‚ useNativeAnimations - å¯ç”¨æœ¬åœ°åŠ¨ç”»ã€‚é»˜è®¤æ˜¯trueã€‚ drawerBackgroundColor - è®¾ç½®æŠ½å±‰çš„èƒŒæ™¯èƒŒæ™¯ã€‚é»˜è®¤æ˜¯whiteã€‚ initialRouteName - ç¬¬ä¸€æ¬¡åŠ è½½æ—¶åˆå§‹é€‰é¡¹å¡è·¯ç”±çš„routeNameã€‚ order - å®šä¹‰é€‰é¡¹å¡é¡ºåºçš„routeNamesæ•°ç»„ã€‚ paths - æä¾›routeNameåˆ°pathçš„æ·±åº¦é“¾æŽ¥ï¼Œå®ƒä¼šè¦†ç›–RouteConfigsä¸­è®¾ç½®çš„è·¯å¾„ã€‚ backBehavior - åŽé€€æŒ‰é’®æ˜¯å¦ä¼šå¯¼è‡´æ ‡ç­¾åˆ‡æ¢åˆ°åˆå§‹è·¯ç”±ï¼Ÿå¦‚æžœæ˜¯ï¼Œåˆ™è®¾ç½®ä¸ºinitialRouteï¼Œå¦åˆ™noneã€‚é»˜è®¤ä¸ºinitialRouteã€‚ contentComponent æä¾›è‡ªå®šä¹‰çš„æŠ½å±‰æ•ˆæžœæŠ½å±‰çš„é»˜è®¤ç»„ä»¶æ˜¯å¯æ»šåŠ¨çš„ï¼ŒåªåŒ…å«RouteConfigä¸­è·¯ç”±çš„é“¾æŽ¥ã€‚æ‚¨å¯ä»¥è½»æ¾åœ°è¦†ç›–é»˜è®¤ç»„ä»¶ï¼Œä»¥å‘æŠ½å±‰ä¸­æ·»åŠ é¡µçœ‰ï¼Œé¡µè„šæˆ–å…¶ä»–å†…å®¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŠ½å±‰å¯æ»šåŠ¨å¹¶æ”¯æŒiPhone Xå®‰å…¨åŒºåŸŸã€‚å¦‚æžœæ‚¨è‡ªå®šä¹‰å†…å®¹ï¼Œè¯·åŠ¡å¿…å°†å†…å®¹åŒ…è£…åœ¨SafeAreaViewä¸­ DrawerItemsçš„contentOptions items - è·¯ç”±æ•°ç»„ï¼Œå¯ä»¥ä¿®æ”¹æˆ–è¦†ç›–ã€‚ activeItemKey - è¯†åˆ«æ´»åŠ¨è·¯çº¿çš„keyã€‚ activeTintColor - æ´»åŠ¨æ ‡ç­¾çš„æ ‡ç­¾å’Œå›¾æ ‡é¢œè‰²ã€‚(é€‰ä¸­) activeBackgroundColor - æ´»åŠ¨æ ‡ç­¾çš„èƒŒæ™¯é¢œè‰²ã€‚(é€‰ä¸­) inactiveTintColor - ä¸æ´»åŠ¨æ ‡ç­¾çš„æ ‡ç­¾å’Œå›¾æ ‡é¢œè‰²ã€‚(æœªé€‰ä¸­) inactiveBackgroundColor - ä¸æ´»åŠ¨æ ‡ç­¾çš„èƒŒæ™¯é¢œè‰²ã€‚(æœªé€‰ä¸­) onItemPress(route) - æŒ‰ä¸‹æŸä¸ªItemæ—¶è°ƒç”¨çš„å‡½æ•°ã€‚ itemsContainerStyle - itemå†…å®¹çš„æ ·å¼ã€‚ itemStyle - å•ä¸ªItemæ ·å¼ï¼Œå…¶ä¸­å¯ä»¥åŒ…å«å›¾æ ‡å’Œæ ‡ç­¾ã€‚ labelStyle - å½“æ ‡ç­¾æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œä¼šè¦†ç›–æ–‡å­—çš„æ ·å¼ã€‚ activeLabelStyle - å½“æ ‡ç­¾æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œä¼šè¦†ç›–é€‰ä¸­çš„æ–‡å­—æ ·å¼ã€‚ inactiveLabelStyle - å½“æ ‡ç­¾æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œä¼šè¦†ç›–æœªé€‰ä¸­çš„æ–‡å­—æ ·å¼ã€‚ iconContainerStyle - ç”¨æ¥è¦†ç›–iconçš„æ ·å¼ Screen Navigation Options title - é€šç”¨æ ‡é¢˜å¯ä»¥ç”¨ä½œheaderTitleå’ŒtabBarLabelã€‚ drawerLabel - å¯ä»¥ä¼ å…¥å­—ç¬¦ä¸²ï¼ŒReact Elementæˆ–ç»™å®š{focusedï¼šbooleanï¼ŒtintColorï¼šstring}çš„å‡½æ•°è¿”å›žä¸€ä¸ªReact.Nodeï¼Œç”¨æ¥æ˜¾ç¤ºåœ¨æŠ½å±‰è¾¹æ ä¸­ã€‚å½“ä¸è®¾ç½®æ—¶ï¼Œé»˜è®¤ä½¿ç”¨titleã€‚ drawerIcon - React Elementæˆ–ç»™å®š{focusedï¼šbooleanï¼ŒtintColorï¼šstring}çš„å‡½æ•°è¿”å›žä¸€ä¸ªReact.Nodeï¼Œç”¨æ¥æ˜¾ç¤ºåœ¨æŠ½å±‰è¾¹æ ä¸­ã€‚ drawerLockMode - æŒ‡å®šæŠ½å±‰çš„é”å®šæ¨¡å¼ã€‚è¿™ä¹Ÿå¯ä»¥é€šè¿‡åœ¨é¡¶çº§è·¯ç”±å™¨ä¸Šä½¿ç”¨screenProps.drawerLockModeåŠ¨æ€æ›´æ–°ã€‚ enum(&#39;unlocked&#39;, &#39;locked-closed&#39;, &#39;locked-open&#39;) createMaterialBottomTabNavigatorè¿™ä¸ªæ–¹æ³•åœ¨2.0æ­£å¼ç‰ˆä¸­è¢«ç æŽ‰äº†ï¼Œä½†å®˜æ–¹æ–‡æ¡£æ²¡æœ‰æ›´æ–°ï¼Œå¦‚æžœå–œæ¬¢materialé£Žæ ¼ï¼Œå¯ä»¥å‚è€ƒreact-native-material-bottom-navigationå¸¸ç”¨å±žæ€§æ–¹æ³• è¿™éƒ¨åˆ†ä¼šåˆ†ä¸ºcreateStackNavigatorå’ŒcreateDrawerNavigatorä¸¤éƒ¨åˆ†ï¼Œå› ä¸ºå®ƒä»¬å±žæ€§ä¸å¤ªä¸€æ ·ã€‚ createStackNavigatorå¸¸ç”¨æ–¹æ³• åœ¨æ–°ç‰ˆçš„react-navigationä¸­å®žçŽ°äº†å¾ˆå¤šå¸¸ç”¨çš„apiï¼Œæ¯”å¦‚è¯´pushï¼Œpopï¼ŒpopToTopç­‰å¸¸ç”¨æ–¹æ³•ï¼Œåœ¨æœ¬æ–‡ä¸­ä¼šå°†å±žæ€§å’Œä½¿ç”¨æ–¹æ³•ç®€å•è¯´æ˜Žã€‚ NavigationActions Navigate - ç”¨æ¥è·³è½¬åˆ°å…¶ä»–è·¯ç”±çš„æ–¹æ³• routeName - String - å¿…é¡» - åœ¨RouteConfigsä¸­æ³¨å†Œè¿‡çš„è·¯ç”±åç§° params - Object - å¯é€‰ - ä¼ é€’çš„å‚æ•° action - Object - å¯é€‰ - ï¼ˆé«˜çº§ï¼‰å¦‚æžœå±å¹•æ˜¯å¯¼èˆªå™¨ï¼Œåˆ™åœ¨å­è·¯ç”±å™¨ä¸­è¿è¡Œçš„å­æ“ä½œã€‚æœ¬æ–‡æ¡£ä¸­æè¿°çš„ä»»ä½•ä¸€é¡¹æ“ä½œéƒ½å¯ä»¥è®¾ç½®ä¸ºå­æ“ä½œã€‚ key - String - å¯é€‰ - è¦å¯¼èˆªåˆ°çš„è·¯çº¿çš„æ ‡è¯†ç¬¦ã€‚å¦‚æžœå®ƒå·²ç»å­˜åœ¨ï¼Œåˆ™è¿”å›žåˆ°æ­¤è·¯çº¿ã€‚ 1234567import &#123; NavigationActions &#125; from &apos;react-navigation&apos;;const navigateAction = NavigationActions.navigate(&#123; routeName: &apos;Profile&apos;, params: &#123;&#125;, action: NavigationActions.navigate(&#123; routeName: &apos;SubProfileRoute&apos; &#125;),&#125;);this.props.navigation.dispatch(navigateAction); Back - ç”¨æ¥è¿”å›žåˆ°ä¸Šä¸€ä¸ªè·¯ç”±æˆ–å…¶ä»–è·¯ç”± Key - String | null - å¦‚æžœè®¾ç½®ï¼Œå¯¼èˆªå°†ä»Žç»™å®šçš„é”®è¿”å›žã€‚å¦‚æžœä¸ºç©ºï¼Œå¯¼èˆªå°†è¿”å›žåˆ°ä¸Šä¸€çº§ã€‚ 12345import &#123; NavigationActions &#125; from &apos;react-navigation&apos;;const backAction = NavigationActions.back(&#123; key: &apos;Profile&apos;,&#125;);this.props.navigation.dispatch(backAction); SetParams åœ¨è°ƒç”¨SetParamsæ—¶ï¼Œè·¯ç”±å™¨å°†äº§ç”Ÿä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œè¯¥çŠ¶æ€å·²ç»æ”¹å˜äº†ç”±keyæ ‡è¯†çš„ç‰¹å®šè·¯ç”±å‚æ•° params - Object - å¯é€‰ - æ–°çš„å‚æ•°è¢«åˆå¹¶åˆ°çŽ°æœ‰çš„è·¯å¾„å‚æ•°ä¸­ã€‚ key - String - å¿…é¡» - èŽ·å–æ–°å‚æ•°çš„è·¯ç”±é”®ã€‚ 1234567import &#123; NavigationActions &#125; from &apos;react-navigation&apos;;const setParamsAction = NavigationActions.setParams(&#123; params: &#123; title: &apos;Hello&apos; &#125;, key: &apos;screen-123&apos;,&#125;);this.props.navigation.dispatch(setParamsAction); Reset - é‡ç½®è·¯ç”± Resetæ“ä½œå°†é‡ç½®æ•´ä¸ªå¯¼èˆªçŠ¶æ€å¹¶å°†å…¶æ›¿æ¢ä¸ºæ–°çš„å¯¼èˆªã€‚ index - number - å¿…é¡» - å¯¼èˆªä¸­routesæ´»åŠ¨è·¯ç”±çš„ç´¢å¼•stateã€‚ actions - array - å¿…é¡» - å°†æ›¿æ¢å¯¼èˆªæ•°ç»„ã€‚ key - string | null - å¯é€‰ - å¦‚æžœè®¾ç½®ï¼Œå…·æœ‰ç»™å®šé”®çš„å¯¼èˆªå™¨å°†é‡ç½®ã€‚å¦‚æžœä¸ºnullï¼Œåˆ™æ ¹å¯¼èˆªå™¨å°†è¢«é‡ç½®ã€‚ 123456import &#123; StackActions, NavigationActions &#125; from &apos;react-navigation&apos;;const resetAction = StackActions.reset(&#123; index: 0, actions: [NavigationActions.navigate(&#123; routeName: &apos;Profile&apos; &#125;)],&#125;);this.props.navigation.dispatch(resetAction); Replace - ç”¨æ–°çš„routeæ›¿æ¢å½“å‰çš„route Replaceæ“ä½œå°†ç»™å®škeyä¸Šçš„è·¯çº¿æ›¿æ¢ä¸ºå¦ä¸€æ¡è·¯çº¿ã€‚ key - string - å¿…é¡» - è¦æ›¿æ¢â€‹â€‹è·¯ç”±çš„keyã€‚ newKey - string - ç”¨äºŽæ›¿æ¢è·¯ç”±çš„keyã€‚å¦‚æžœæœªæä¾›ï¼Œåˆ™è‡ªåŠ¨ç”Ÿæˆã€‚ routeName - string - ç”¨äºŽæ›¿æ¢è·¯ç”±çš„routeNameã€‚ params - object - è¦ä¼ å…¥æ›¿æ¢è·¯ç”±çš„å‚æ•°ã€‚ action - object - å¯é€‰çš„å­æ“ä½œã€‚ Push - å…¥æ ˆ Pushæ“ä½œä¼šåœ¨å †æ ˆé¡¶éƒ¨æ·»åŠ ä¸€æ¡è·¯å¾„å¹¶å‘å‰å¯¼èˆªã€‚è¿™ä¸Žä¹‹å‰çš„ä¸åŒä¹‹å¤„åœ¨äºŽï¼Œå¦‚æžœæŸä¸ªç»„ä»¶å·²ç»å­˜åœ¨è·¯ç”±ä¸­ï¼Œnavigateåˆ™ä¼šå¼¹å‡ºåˆ°å †æ ˆä¸­çš„è¾ƒæ—©ç‰ˆæœ¬ã€‚Pushå°†å§‹ç»ˆæ·»åŠ åœ¨é¡¶éƒ¨ï¼Œå› æ­¤å¯ä»¥å¤šæ¬¡å®‰è£…ç»„ä»¶ã€‚ routeName - string - è¦è·³è½¬è·¯ç”±çš„routeNameã€‚ params - object - ä¼ é€’çš„å‚æ•°ï¼Œå¯ä»¥é€šè¿‡(this.props.navigation.state.params)æ‰¾åˆ°ã€‚ action - å­æ“ä½œã€‚ pop(n) - å‡ºæ ˆ Popæ“ä½œå°†ä½¿æ‚¨å›žåˆ°å †æ ˆä¸­çš„å‰ä¸€ä¸ªå±å¹•ã€‚nå‚æ•°å…è®¸æ‚¨æŒ‡å®šè¦å¤šå°‘ä¸ªå±å¹•å‡ºæ ˆã€‚ n - number - è¦å‡ºæ ˆçš„å±å¹•æ•°é‡ã€‚ PopToTop - å›žåˆ°æ ˆé¡¶ PopToTopæ“ä½œä¼šå°†æ‚¨å¸¦å›žå †æ ˆä¸­çš„ç¬¬ä¸€ä¸ªå±å¹•ï¼Œè§£é™¤æ‰€æœ‰å…¶ä»–å±å¹•ã€‚å®ƒçš„åŠŸèƒ½ä¸ŽStackActions.pop({n: currentIndex})ç±»ä¼¼ã€‚ æ€»ç»“react-navigationæ‰å¼€å§‹ç”¨çš„æ—¶å€™æ„Ÿè§‰æ˜¯å¤æ‚çš„ï¼Œä½†ç”¨çš„å¤šäº†ï¼Œä¼šæ„Ÿè§‰çœŸçš„å¾ˆä¸é”™ã€‚å¦‚æžœåœ¨æ–‡ç« ä¸­æœ‰ä»€ä¹ˆä¸æ‡‚çš„é—®é¢˜ï¼Œæ¬¢è¿Žåœ¨è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥å‘ç§ä¿¡ï¼ŒåŠ QQç¾¤397885169ä¸€èµ·è®¨è®ºå“¦]]></content>
  </entry>
</search>
